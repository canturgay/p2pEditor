import{c as T,g as P,a as f,h as v,b as k,r as z,i as X,o as O,d as E,n as Z,e as U,l as M,f as ee,j as H,k as I,w as S,m as le,p as te,q as ie,s as re,t as se,u as ue,v as ce,x as D,y as B,z as de,A as fe,B as ne,C as L,D as Q,E as q,F as $,G as V,H as j,I as C,J as oe,Q as Y,K as ve,L as he,M as me,N as ge}from"./index-CplbzeJY.js";import{u as be,a as ye,Q as pe}from"./vueGun-C29lUgCS.js";import{u as we}from"./AuthStore-SSvRpeL-.js";const ze=T({name:"QBanner",props:{...be,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:l}){const{proxy:{$q:n}}=P(),t=ye(e,n),o=f(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(t.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),i=f(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const r=[v("div",{class:"q-banner__avatar col-auto row items-center self-start"},k(l.avatar)),v("div",{class:"q-banner__content col text-body2"},k(l.default))],h=k(l.action);return h!==void 0&&r.push(v("div",{class:i.value},h)),v("div",{class:o.value+(e.inlineActions===!1&&h!==void 0?" q-banner--top-padding":""),role:"alert"},r)}}});function _e(){const e=z(!X.value);return e.value===!1&&O(()=>{e.value=!0}),{isHydrated:e}}const ae=typeof ResizeObserver<"u",G=ae===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},W=T({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:l}){let n=null,t,o={width:-1,height:-1};function i(u){u===!0||e.debounce===0||e.debounce==="0"?r():n===null&&(n=setTimeout(r,e.debounce))}function r(){if(n!==null&&(clearTimeout(n),n=null),t){const{offsetWidth:u,offsetHeight:s}=t;(u!==o.width||s!==o.height)&&(o={width:u,height:s},l("resize",o))}}const{proxy:h}=P();if(h.trigger=i,ae===!0){let u;const s=b=>{t=h.$el.parentNode,t?(u=new ResizeObserver(i),u.observe(t),r()):b!==!0&&U(()=>{s(!0)})};return O(()=>{s()}),E(()=>{n!==null&&clearTimeout(n),u!==void 0&&(u.disconnect!==void 0?u.disconnect():t&&u.unobserve(t))}),Z}else{let u=function(){n!==null&&(clearTimeout(n),n=null),m!==void 0&&(m.removeEventListener!==void 0&&m.removeEventListener("resize",i,M.passive),m=void 0)},s=function(){u(),t?.contentDocument&&(m=t.contentDocument.defaultView,m.addEventListener("resize",i,M.passive),r())};const{isHydrated:b}=_e();let m;return O(()=>{U(()=>{t=h.$el,t&&s()})}),E(u),()=>{if(b.value===!0)return v("object",{class:"q--avoid-card-border",style:G.style,tabindex:-1,type:"text/html",data:G.url,"aria-hidden":"true",onLoad:s})}}}}),xe=T({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:l,emit:n}){const{proxy:{$q:t}}=P(),o=ee(I,H);if(o===H)return console.error("QHeader needs to be child of QLayout"),H;const i=z(parseInt(e.heightHint,10)),r=z(!0),h=f(()=>e.reveal===!0||o.view.value.indexOf("H")!==-1||t.platform.is.ios&&o.isContainer.value===!0),u=f(()=>{if(e.modelValue!==!0)return 0;if(h.value===!0)return r.value===!0?i.value:0;const a=i.value-o.scroll.value.position;return a>0?a:0}),s=f(()=>e.modelValue!==!0||h.value===!0&&r.value!==!0),b=f(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),m=f(()=>"q-header q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),_=f(()=>{const a=o.rows.value.top,y={};return a[0]==="l"&&o.left.space===!0&&(y[t.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),a[2]==="r"&&o.right.space===!0&&(y[t.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),y});function d(a,y){o.update("header",a,y)}function p(a,y){a.value!==y&&(a.value=y)}function N({height:a}){p(i,a),d("size",a)}function F(a){b.value===!0&&p(r,!0),n("focusin",a)}S(()=>e.modelValue,a=>{d("space",a),p(r,!0),o.animate()}),S(u,a=>{d("offset",a)}),S(()=>e.reveal,a=>{a===!1&&p(r,e.modelValue)}),S(r,a=>{o.animate(),n("reveal",a)}),S(o.scroll,a=>{e.reveal===!0&&p(r,a.direction==="up"||a.position<=e.revealOffset||a.position-a.inflectionPoint<100)});const R={};return o.instances.header=R,e.modelValue===!0&&d("size",i.value),d("space",e.modelValue),d("offset",u.value),E(()=>{o.instances.header===R&&(o.instances.header=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const a=le(l.default,[]);return e.elevated===!0&&a.push(v("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),a.push(v(W,{debounce:0,onResize:N})),v("header",{class:m.value,style:_.value,onFocusin:F},a)}}}),Se=T({name:"QPageContainer",setup(e,{slots:l}){const{proxy:{$q:n}}=P(),t=ee(I,H);if(t===H)return console.error("QPageContainer needs to be child of QLayout"),H;te(ie,!0);const o=f(()=>{const i={};return t.header.space===!0&&(i.paddingTop=`${t.header.size}px`),t.right.space===!0&&(i[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(i.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(i[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),i});return()=>v("div",{class:"q-page-container",style:o.value},k(l.default))}}),{passive:J}=M,qe=["both","horizontal","vertical"],Te=T({name:"QScrollObserver",props:{axis:{type:String,validator:e=>qe.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:re},emits:["scroll"],setup(e,{emit:l}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,o,i;S(()=>e.scrollTarget,()=>{u(),h()});function r(){t?.();const m=Math.max(0,ue(o)),_=ce(o),d={top:m-n.position.top,left:_-n.position.left};if(e.axis==="vertical"&&d.top===0||e.axis==="horizontal"&&d.left===0)return;const p=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";n.position={top:m,left:_},n.directionChanged=n.direction!==p,n.delta=d,n.directionChanged===!0&&(n.direction=p,n.inflectionPoint=n.position),l("scroll",{...n})}function h(){o=se(i,e.scrollTarget),o.addEventListener("scroll",s,J),s(!0)}function u(){o!==void 0&&(o.removeEventListener("scroll",s,J),o=void 0)}function s(m){if(m===!0||e.debounce===0||e.debounce==="0")r();else if(t===null){const[_,d]=e.debounce?[setTimeout(r,e.debounce),clearTimeout]:[requestAnimationFrame(r),cancelAnimationFrame];t=()=>{d(_),t=null}}}const{proxy:b}=P();return S(()=>b.$q.lang.rtl,r),O(()=>{i=b.$el.parentNode,h()}),E(()=>{t?.(),u()}),Object.assign(b,{trigger:s,getPosition:()=>n}),Z}}),Ce=T({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:l,emit:n}){const{proxy:{$q:t}}=P(),o=z(null),i=z(t.screen.height),r=z(e.container===!0?0:t.screen.width),h=z({position:0,direction:"down",inflectionPoint:0}),u=z(0),s=z(X.value===!0?0:D()),b=f(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=f(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),_=f(()=>s.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),d=f(()=>s.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function p(c){if(e.container===!0||document.qScrollPrevented!==!0){const g={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};h.value=g,e.onScroll!==void 0&&n("scroll",g)}}function N(c){const{height:g,width:x}=c;let w=!1;i.value!==g&&(w=!0,i.value=g,e.onScrollHeight!==void 0&&n("scrollHeight",g),R()),r.value!==x&&(w=!0,r.value=x),w===!0&&e.onResize!==void 0&&n("resize",c)}function F({height:c}){u.value!==c&&(u.value=c,R())}function R(){if(e.container===!0){const c=i.value>u.value?D():0;s.value!==c&&(s.value=c)}}let a=null;const y={instances:{},view:f(()=>e.view),isContainer:f(()=>e.container),rootRef:o,height:i,containerHeight:u,scrollbarWidth:s,totalWidth:f(()=>r.value+s.value),rows:f(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:B({size:0,offset:0,space:!1}),right:B({size:300,offset:0,space:!1}),footer:B({size:0,offset:0,space:!1}),left:B({size:300,offset:0,space:!1}),scroll:h,animate(){a!==null?clearTimeout(a):document.body.classList.add("q-body--layout-animate"),a=setTimeout(()=>{a=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,g,x){y[c][g]=x}};if(te(I,y),D()>0){let c=function(){w=null,A.classList.remove("hide-scrollbar")},g=function(){if(w===null){if(A.scrollHeight>t.screen.height)return;A.classList.add("hide-scrollbar")}else clearTimeout(w);w=setTimeout(c,300)},x=function(K){w!==null&&K==="remove"&&(clearTimeout(w),c()),window[`${K}EventListener`]("resize",g)},w=null;const A=document.body;S(()=>e.container!==!0?"add":"remove",x),e.container!==!0&&x("add"),de(()=>{x("remove")})}return()=>{const c=fe(l.default,[v(Te,{onScroll:p}),v(W,{onResize:N})]),g=v("div",{class:b.value,style:m.value,ref:e.container===!0?void 0:o,tabindex:-1},c);return e.container===!0?v("div",{class:"q-layout-container overflow-hidden",ref:o},[v(W,{onResize:F}),v("div",{class:"absolute-full",style:_.value},[v("div",{class:"scroll",style:d.value},[g])])]):g}}}),$e=T({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:l}){const n=f(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>v("div",{class:n.value},k(l.default))}}),Le=T({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:l}){const n=f(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>v("div",{class:n.value,role:"toolbar"},k(l.default))}}),Qe=ne({__name:"NavBar",setup(e){const l=we();return(n,t)=>(Q(),L(Le,null,{default:q(()=>[$($e,null,{default:q(()=>t[0]||(t[0]=[j(" P2P Editor ")])),_:1,__:[0]}),C(l).isAuthenticated?(Q(),L(pe,{key:0,dense:"",class:"q-mr-sm"},{default:q(()=>[j(oe(C(l).alias),1)]),_:1})):V("",!0),C(l).isAuthenticated?(Q(),L(Y,{key:1,color:"negative",label:"Logout",onClick:C(l).logout},null,8,["onClick"])):V("",!0),C(l).isAuthenticated?(Q(),L(Y,{key:2,color:"secondary",label:"Download Recovery",onClick:C(l).downloadRecoveryFile,class:"q-ml-sm","data-cy":"btn-download-recovery"},null,8,["onClick"])):V("",!0)]),_:1}))}}),Re=ne({__name:"MainLayout",setup(e){const l=ve(),n=he(),t=f(()=>n.name==="auth"?"You are offline. Sign in may be unavailable.":"You are offline. Changes will be saved locally and synced when connection is restored.");return(o,i)=>{const r=me("router-view");return Q(),L(Ce,{view:"hHh lpR fFf"},{default:q(()=>[$(xe,{elevated:"",class:"bg-primary text-white"},{default:q(()=>[$(Qe),C(l).isOnline?V("",!0):(Q(),L(ze,{key:0,dense:"",class:"bg-orange text-white",style:{"border-radius":"0"},"data-cy":"offline-banner"},{avatar:q(()=>[$(ge,{name:"wifi_off"})]),default:q(()=>[j(" "+oe(t.value),1)]),_:1}))]),_:1}),$(Se,null,{default:q(()=>[$(r)]),_:1})]),_:1})}}});export{Re as default};
