import{c as ae,a as D,h as M,b as we,a4 as zl,g as fe,a5 as Hl,r as R,a6 as Bt,P as Ce,m as Ol,A as Xt,n as xn,a7 as Rl,T as Ve,a8 as bt,e as pe,w as X,o as Ke,d as be,a9 as jt,l as Ut,aa as Fn,ab as zt,z as $l,S as xl,ac as Fl,ad as Il,ae as Nl,U as Gt,W as In,R as Yt,x as jl,s as Nn,af as Ul,t as jn,ag as yt,ah as Un,ai as Qn,aj as Wn,N as Mt,Q as ne,O as Te,ak as Zt,al as wt,am as Kn,a0 as Jt,a2 as ke,K as Ql,an as Wl,ao as Kl,ap as Xl,B as Xe,C as he,D as oe,E as Y,F as x,G as Pe,_ as de,aq as Le,ar as Xn,as as Gn,at as Gl,J as it,I as ee,au as Yl,V as Zl,av as nt,aw as Jl,ax as eo,H as at,Z as Ht}from"./index-CplbzeJY.js";import{u as Ge,a as Ye,g as me,S as ve,b as to,Q as no}from"./vueGun-C29lUgCS.js";import{r as Bn,j as lo,i as en,k as oo,l as io,a as Yn,m as ao,Q as tn,u as Zn,n as nn,g as Jn,c as el,d as ro,f as Mn,o as uo,p as En}from"./format-CIoEm-z8.js";import{Q as so}from"./QPage-Bah8tRqZ.js";const ut=ae({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:n}){const a=D(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>M("div",{class:a.value},we(n.default))}}),ln=ae({name:"QItem",props:{...Ge,...zl,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:n,emit:a}){const{proxy:{$q:r}}=fe(),f=Ye(e,r),{hasLink:t,linkAttrs:l,linkClass:i,linkTag:c,navigateOnClick:s}=Hl(),o=R(null),u=R(null),v=D(()=>e.clickable===!0||t.value===!0||e.tag==="label"),d=D(()=>e.disable!==!0&&v.value===!0),g=D(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(f.value===!0?" q-item--dark":"")+(t.value===!0&&e.active===null?i.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(d.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),p=D(()=>e.insetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function b(_){d.value===!0&&(u.value!==null&&_.qAvoidFocus!==!0&&(_.qKeyEvent!==!0&&document.activeElement===o.value?u.value.focus():document.activeElement===u.value&&o.value.focus()),s(_))}function w(_){if(d.value===!0&&Bt(_,[13,32])===!0){Ce(_),_.qKeyEvent=!0;const C=new MouseEvent("click",_);C.qKeyEvent=!0,o.value.dispatchEvent(C)}a("keyup",_)}function S(){const _=Ol(n.default,[]);return d.value===!0&&_.unshift(M("div",{class:"q-focus-helper",tabindex:-1,ref:u})),_}return()=>{const _={ref:o,class:g.value,style:p.value,role:"listitem",onClick:b,onKeyup:w};return d.value===!0?(_.tabindex=e.tabindex||"0",Object.assign(_,l.value)):v.value===!0&&(_["aria-disabled"]="true"),M(c.value,_,S())}}}),co=["ul","ol"],fo=ae({name:"QList",props:{...Ge,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:n}){const a=fe(),r=Ye(e,a.proxy.$q),f=D(()=>co.includes(e.tag)?null:"list"),t=D(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(r.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>M(e.tag,{class:t.value,role:f.value},we(n.default))}}),vo=["top","middle","bottom"],ho=ae({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>vo.includes(e)}},setup(e,{slots:n}){const a=D(()=>e.align!==void 0?{verticalAlign:e.align}:null),r=D(()=>{const f=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(f!==void 0?` text-${f}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>M("div",{class:r.value,style:a.value,role:"status","aria-label":e.label},Xt(n.default,e.label!==void 0?[e.label]:[]))}});function tl(e,n){if(n&&e===n)return null;const a=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(a)===!0)return e;const r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f=r.display;return f==="block"||f==="table"?e:tl(e.parentNode)}function Ot(e,n,a){return!e||e===document.body?!1:a===!0&&e===n||(n===document?document.body:n).contains(e.parentNode)}function nl(e,n,a){if(a||(a=document.createRange(),a.selectNode(e),a.setStart(e,0)),n.count===0)a.setEnd(e,n.count);else if(n.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<n.count?n.count-=e.textContent.length:(a.setEnd(e,n.count),n.count=0);else for(let r=0;n.count!==0&&r<e.childNodes.length;r++)a=nl(e.childNodes[r],n,a);return a}const go=/^https?:\/\//;class mo{constructor(n,a){this.el=n,this.eVm=a,this._range=null}get selection(){if(this.el){const n=document.getSelection();if(Ot(n.anchorNode,this.el,!0)&&Ot(n.focusNode,this.el,!0))return n}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const n=this.selection;return n?.rangeCount?n.getRangeAt(0):this._range}get parent(){const n=this.range;if(n!==null){const a=n.startContainer;return a.nodeType===document.ELEMENT_NODE?a:a.parentNode}return null}get blockParent(){const n=this.parent;return n!==null?tl(n,this.el):null}save(n=this.range){n!==null&&(this._range=n)}restore(n=this._range){const a=document.createRange(),r=document.getSelection();n!==null?(a.setStart(n.startContainer,n.startOffset),a.setEnd(n.endContainer,n.endOffset),r.removeAllRanges(),r.addRange(a)):(r.selectAllChildren(this.el),r.collapseToEnd())}savePosition(){let n=-1,a;const r=document.getSelection(),f=this.el.parentNode;if(r.focusNode&&Ot(r.focusNode,f))for(a=r.focusNode,n=r.focusOffset;a&&a!==f;)a!==this.el&&a.previousSibling?(a=a.previousSibling,n+=a.textContent.length):a=a.parentNode;this.savedPos=n}restorePosition(n=0){if(this.savedPos>0&&this.savedPos<n){const a=window.getSelection(),r=nl(this.el,{count:this.savedPos});r&&(r.collapse(!1),a.removeAllRanges(),a.addRange(r))}}hasParent(n,a){const r=a?this.parent:this.blockParent;return r!==null?r.nodeName.toLowerCase()===n.toLowerCase():!1}hasParents(n,a,r=this.parent){return r===null?!1:n.includes(r.nodeName.toLowerCase())===!0?!0:a===!0?this.hasParents(n,a,r.parentNode):!1}is(n,a){if(this.selection===null)return!1;switch(n){case"formatBlock":return a==="DIV"&&this.parent===this.el||this.hasParent(a,a==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(n)===a;case"fontName":const r=document.queryCommandValue(n);return r===`"${a}"`||r===a;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const f=document.queryCommandState(n);return a!==void 0?f===a:f}}getParentAttribute(n){return this.parent!==null?this.parent.getAttribute(n):null}can(n){if(n==="outdent")return this.hasParents(["blockquote","li"],!0);if(n==="indent")return this.hasParents(["li"],!0);if(n==="link")return this.selection!==null||this.is("link")}apply(n,a,r=xn){if(n==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(a)&&this.is(n,a)&&(n="outdent",a=null),a==="PRE"&&this.is(n,"PRE")&&(a="P");else if(n==="print"){r();const f=window.open();f.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),f.print(),f.close();return}else if(n==="link"){const f=this.getParentAttribute("href");if(f===null){const t=this.selectWord(this.selection),l=t?t.toString():"";if(!l.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=go.test(l)?l:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(t.getRangeAt(0))}else this.eVm.editLinkUrl.value=f,this.range.selectNodeContents(this.parent),this.save();return}else if(n==="fullscreen"){this.eVm.toggleFullscreen(),r();return}else if(n==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),r();return}document.execCommand(n,!1,a),r()}selectWord(n){if(n===null||n.isCollapsed!==!0||n.modify===void 0)return n;const a=document.createRange();a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset);const r=a.collapsed?["backward","forward"]:["forward","backward"];a.detach();const f=n.focusNode,t=n.focusOffset;return n.collapse(n.anchorNode,n.anchorOffset),n.modify("move",r[0],"character"),n.modify("move",r[1],"word"),n.extend(f,t),n.modify("extend",r[1],"character"),n.modify("extend",r[0],"word"),n}}const ll=ae({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:n}){const a=D(()=>{const r=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(f=>e[f]===!0).map(f=>`q-btn-group--${f}`).join(" ");return`q-btn-group row no-wrap${r.length!==0?" "+r:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>M("div",{class:a.value},we(n.default))}});function Qt(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Rl.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ol={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},po={...ol,contextMenu:Boolean};function il({showing:e,avoidEmit:n,configureAnchorEl:a}){const{props:r,proxy:f,emit:t}=fe(),l=R(null);let i=null;function c(d){return l.value===null?!1:d===void 0||d.touches===void 0||d.touches.length<=1}const s={};a===void 0&&(Object.assign(s,{hide(d){f.hide(d)},toggle(d){f.toggle(d),d.qAnchorHandled=!0},toggleKey(d){Bt(d,13)===!0&&s.toggle(d)},contextClick(d){f.hide(d),Ve(d),pe(()=>{f.show(d),d.qAnchorHandled=!0})},prevent:Ve,mobileTouch(d){if(s.mobileCleanup(d),c(d)!==!0)return;f.hide(d),l.value.classList.add("non-selectable");const g=d.target;bt(s,"anchor",[[g,"touchmove","mobileCleanup","passive"],[g,"touchend","mobileCleanup","passive"],[g,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),i=setTimeout(()=>{i=null,f.show(d),d.qAnchorHandled=!0},300)},mobileCleanup(d){l.value.classList.remove("non-selectable"),i!==null&&(clearTimeout(i),i=null),e.value===!0&&d!==void 0&&Qt()}}),a=function(d=r.contextMenu){if(r.noParentEvent===!0||l.value===null)return;let g;d===!0?f.$q.platform.is.mobile===!0?g=[[l.value,"touchstart","mobileTouch","passive"]]:g=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:g=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],bt(s,"anchor",g)});function o(){jt(s,"anchor")}function u(d){for(l.value=d;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;a()}function v(){if(r.target===!1||r.target===""||f.$el.parentNode===null)l.value=null;else if(r.target===!0)u(f.$el.parentNode);else{let d=r.target;if(typeof r.target=="string")try{d=document.querySelector(r.target)}catch{d=void 0}d!=null?(l.value=d.$el||d,a()):(l.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return X(()=>r.contextMenu,d=>{l.value!==null&&(o(),a(d))}),X(()=>r.target,()=>{l.value!==null&&o(),v()}),X(()=>r.noParentEvent,d=>{l.value!==null&&(d===!0?o():a())}),Ke(()=>{v(),n!==!0&&r.modelValue===!0&&l.value===null&&t("update:modelValue",!1)}),be(()=>{i!==null&&clearTimeout(i),o()}),{anchorEl:l,canShow:c,anchorEvents:s}}function al(e,n){const a=R(null);let r;function f(i,c){const s=`${c!==void 0?"add":"remove"}EventListener`,o=c!==void 0?c:r;i!==window&&i[s]("scroll",o,Ut.passive),window[s]("scroll",o,Ut.passive),r=c}function t(){a.value!==null&&(f(a.value),a.value=null)}const l=X(()=>e.noParentEvent,()=>{a.value!==null&&(t(),n())});return be(l),{localScrollTarget:a,unconfigureScrollTarget:t,changeScrollEvent:f}}const on={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},an=["beforeShow","show","beforeHide","hide"];function rn({showing:e,canShow:n,hideOnRouteChange:a,handleShow:r,handleHide:f,processOnMount:t}){const l=fe(),{props:i,emit:c,proxy:s}=l;let o;function u(S){e.value===!0?g(S):v(S)}function v(S){if(i.disable===!0||S?.qAnchorHandled===!0||n!==void 0&&n(S)!==!0)return;const _=i["onUpdate:modelValue"]!==void 0;_===!0&&(c("update:modelValue",!0),o=S,pe(()=>{o===S&&(o=void 0)})),(i.modelValue===null||_===!1)&&d(S)}function d(S){e.value!==!0&&(e.value=!0,c("beforeShow",S),r!==void 0?r(S):c("show",S))}function g(S){if(i.disable===!0)return;const _=i["onUpdate:modelValue"]!==void 0;_===!0&&(c("update:modelValue",!1),o=S,pe(()=>{o===S&&(o=void 0)})),(i.modelValue===null||_===!1)&&p(S)}function p(S){e.value!==!1&&(e.value=!1,c("beforeHide",S),f!==void 0?f(S):c("hide",S))}function b(S){i.disable===!0&&S===!0?i["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!1):S===!0!==e.value&&(S===!0?d:p)(o)}X(()=>i.modelValue,b),a!==void 0&&Fn(l)===!0&&X(()=>s.$route.fullPath,()=>{a.value===!0&&e.value===!0&&g()}),Ke(()=>{b(i.modelValue)});const w={show:v,hide:g,toggle:u};return Object.assign(s,w),w}const rt=[];function bo(e,n){do{if(e.$options.name==="QMenu"){if(e.hide(n),e.$props.separateClosePopup===!0)return zt(e)}else if(e.__qPortal===!0){const a=zt(e);return a?.$options.name==="QPopupProxy"?(e.hide(n),a):e}e=zt(e)}while(e!=null)}const yo=ae({name:"QPortal",setup(e,{slots:n}){return()=>n.default()}});function wo(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function un(e,n,a,r){const f=R(!1),t=R(!1);let l=null;const i={},c=r==="dialog"&&wo(e);function s(u){if(u===!0){Bn(i),t.value=!0;return}t.value=!1,f.value===!1&&(c===!1&&l===null&&(l=Il(!1,r)),f.value=!0,rt.push(e.proxy),lo(i))}function o(u){if(t.value=!1,u!==!0)return;Bn(i),f.value=!1;const v=rt.indexOf(e.proxy);v!==-1&&rt.splice(v,1),l!==null&&(Nl(l),l=null)}return $l(()=>{o(!0)}),e.proxy.__qPortal=!0,xl(e.proxy,"contentEl",()=>n.value),{showPortal:s,hidePortal:o,portalIsActive:f,portalIsAccessible:t,renderPortal:()=>c===!0?a():f.value===!0?[M(Fl,{to:l},M(yo,a))]:void 0}}const Ue={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function sn(e,n=()=>{},a=()=>{}){return{transitionProps:D(()=>{const r=`q-transition--${e.transitionShow||n()}`,f=`q-transition--${e.transitionHide||a()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${f}-leave-from`,leaveActiveClass:`${f}-leave-active`,leaveToClass:`${f}-leave-to`}}),transitionStyle:D(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function cn(){let e;const n=fe();function a(){e=void 0}return Gt(a),be(a),{removeTick:a,registerTick(r){e=r,pe(()=>{e===r&&(In(n)===!1&&e(),e=void 0)})}}}function dn(){let e=null;const n=fe();function a(){e!==null&&(clearTimeout(e),e=null)}return Gt(a),be(a),{removeTimeout:a,registerTimeout(r,f){a(),In(n)===!1&&(e=setTimeout(()=>{e=null,r()},f))}}}const ze=[];let We;function So(e){We=e.keyCode===27}function _o(){We===!0&&(We=!1)}function ko(e){We===!0&&(We=!1,Bt(e,27)===!0&&ze[ze.length-1](e))}function rl(e){window[e]("keydown",So),window[e]("blur",_o),window[e]("keyup",ko),We=!1}function ul(e){Yt.is.desktop===!0&&(ze.push(e),ze.length===1&&rl("addEventListener"))}function St(e){const n=ze.indexOf(e);n!==-1&&(ze.splice(n,1),ze.length===0&&rl("removeEventListener"))}const He=[];function sl(e){He[He.length-1](e)}function cl(e){Yt.is.desktop===!0&&(He.push(e),He.length===1&&document.body.addEventListener("focusin",sl))}function Wt(e){const n=He.indexOf(e);n!==-1&&(He.splice(n,1),He.length===0&&document.body.removeEventListener("focusin",sl))}const{notPassiveCapture:_t}=Ut,Oe=[];function kt(e){const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let a=rt.length-1;for(;a>=0;){const r=rt[a].$;if(r.type.name==="QTooltip"){a--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;a--}for(let r=Oe.length-1;r>=0;r--){const f=Oe[r];if((f.anchorEl.value===null||f.anchorEl.value.contains(n)===!1)&&(n===document.body||f.innerRef.value!==null&&f.innerRef.value.contains(n)===!1))e.qClickOutside=!0,f.onClickOutside(e);else return}}function dl(e){Oe.push(e),Oe.length===1&&(document.addEventListener("mousedown",kt,_t),document.addEventListener("touchstart",kt,_t))}function Ct(e){const n=Oe.findIndex(a=>a===e);n!==-1&&(Oe.splice(n,1),Oe.length===0&&(document.removeEventListener("mousedown",kt,_t),document.removeEventListener("touchstart",kt,_t)))}let An,Pn;function Dt(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function fl(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Kt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Kt[`${e}#ltr`]=e,Kt[`${e}#rtl`]=e});function qt(e,n){const a=e.split(" ");return{vertical:a[0],horizontal:Kt[`${a[1]}#${n===!0?"rtl":"ltr"}`]}}function Co(e,n){let{top:a,left:r,right:f,bottom:t,width:l,height:i}=e.getBoundingClientRect();return n!==void 0&&(a-=n[1],r-=n[0],t+=n[1],f+=n[0],l+=n[0],i+=n[1]),{top:a,bottom:t,height:i,left:r,right:f,width:l,middle:r+(f-r)/2,center:a+(t-a)/2}}function Do(e,n,a){let{top:r,left:f}=e.getBoundingClientRect();return r+=n.top,f+=n.left,a!==void 0&&(r+=a[1],f+=a[0]),{top:r,bottom:r+1,height:1,left:f,right:f+1,width:1,middle:f,center:r}}function qo(e,n){return{top:0,center:n/2,bottom:n,left:0,middle:e/2,right:e}}function Ln(e,n,a,r){return{top:e[a.vertical]-n[r.vertical],left:e[a.horizontal]-n[r.horizontal]}}function fn(e,n=0){if(e.targetEl===null||e.anchorEl===null||n>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{fn(e,n+1)},10);return}const{targetEl:a,offset:r,anchorEl:f,anchorOrigin:t,selfOrigin:l,absoluteOffset:i,fit:c,cover:s,maxHeight:o,maxWidth:u}=e;if(Yt.is.ios===!0&&window.visualViewport!==void 0){const P=document.body.style,{offsetLeft:T,offsetTop:E}=window.visualViewport;T!==An&&(P.setProperty("--q-pe-left",T+"px"),An=T),E!==Pn&&(P.setProperty("--q-pe-top",E+"px"),Pn=E)}const{scrollLeft:v,scrollTop:d}=a,g=i===void 0?Co(f,s===!0?[0,0]:r):Do(f,i,r);Object.assign(a.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:u,maxHeight:o,visibility:"visible"});const{offsetWidth:p,offsetHeight:b}=a,{elWidth:w,elHeight:S}=c===!0||s===!0?{elWidth:Math.max(g.width,p),elHeight:s===!0?Math.max(g.height,b):b}:{elWidth:p,elHeight:b};let _={maxWidth:u,maxHeight:o};(c===!0||s===!0)&&(_.minWidth=g.width+"px",s===!0&&(_.minHeight=g.height+"px")),Object.assign(a.style,_);const C=qo(w,S);let B=Ln(g,C,t,l);if(i===void 0||r===void 0)Rt(B,g,C,t,l);else{const{top:P,left:T}=B;Rt(B,g,C,t,l);let E=!1;if(B.top!==P){E=!0;const H=2*r[1];g.center=g.top-=H,g.bottom-=H+2}if(B.left!==T){E=!0;const H=2*r[0];g.middle=g.left-=H,g.right-=H+2}E===!0&&(B=Ln(g,C,t,l),Rt(B,g,C,t,l))}_={top:B.top+"px",left:B.left+"px"},B.maxHeight!==void 0&&(_.maxHeight=B.maxHeight+"px",g.height>B.maxHeight&&(_.minHeight=_.maxHeight)),B.maxWidth!==void 0&&(_.maxWidth=B.maxWidth+"px",g.width>B.maxWidth&&(_.minWidth=_.maxWidth)),Object.assign(a.style,_),a.scrollTop!==d&&(a.scrollTop=d),a.scrollLeft!==v&&(a.scrollLeft=v)}function Rt(e,n,a,r,f){const t=a.bottom,l=a.right,i=jl(),c=window.innerHeight-i,s=document.body.clientWidth;if(e.top<0||e.top+t>c)if(f.vertical==="center")e.top=n[r.vertical]>c/2?Math.max(0,c-t):0,e.maxHeight=Math.min(t,c);else if(n[r.vertical]>c/2){const o=Math.min(c,r.vertical==="center"?n.center:r.vertical===f.vertical?n.bottom:n.top);e.maxHeight=Math.min(t,o),e.top=Math.max(0,o-t)}else e.top=Math.max(0,r.vertical==="center"?n.center:r.vertical===f.vertical?n.top:n.bottom),e.maxHeight=Math.min(t,c-e.top);if(e.left<0||e.left+l>s)if(e.maxWidth=Math.min(l,s),f.horizontal==="middle")e.left=n[r.horizontal]>s/2?Math.max(0,s-l):0;else if(n[r.horizontal]>s/2){const o=Math.min(s,r.horizontal==="middle"?n.middle:r.horizontal===f.horizontal?n.right:n.left);e.maxWidth=Math.min(l,o),e.left=Math.max(0,o-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?n.middle:r.horizontal===f.horizontal?n.left:n.right),e.maxWidth=Math.min(l,s-e.left)}const vl=ae({name:"QMenu",inheritAttrs:!1,props:{...po,...on,...Ge,...Ue,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Dt},self:{type:String,validator:Dt},offset:{type:Array,validator:fl},scrollTarget:Nn,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...an,"click","escapeKey"],setup(e,{slots:n,emit:a,attrs:r}){let f=null,t,l,i;const c=fe(),{proxy:s}=c,{$q:o}=s,u=R(null),v=R(!1),d=D(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),g=Ye(e,o),{registerTick:p,removeTick:b}=cn(),{registerTimeout:w}=dn(),{transitionProps:S,transitionStyle:_}=sn(e),{localScrollTarget:C,changeScrollEvent:B,unconfigureScrollTarget:P}=al(e,z),{anchorEl:T,canShow:E}=il({showing:v}),{hide:H}=rn({showing:v,canShow:E,handleShow:ce,handleHide:k,hideOnRouteChange:d,processOnMount:!0}),{showPortal:F,hidePortal:I,renderPortal:$}=un(c,u,O,"menu"),K={anchorEl:T,innerRef:u,onClickOutside(q){if(e.persistent!==!0&&v.value===!0)return H(q),(q.type==="touchstart"||q.target.classList.contains("q-dialog__backdrop"))&&Ce(q),!0}},te=D(()=>qt(e.anchor||(e.cover===!0?"center middle":"bottom start"),o.lang.rtl)),Q=D(()=>e.cover===!0?te.value:qt(e.self||"top start",o.lang.rtl)),N=D(()=>(e.square===!0?" q-menu--square":"")+(g.value===!0?" q-menu--dark q-dark":"")),re=D(()=>e.autoClose===!0?{onClick:j}:{}),se=D(()=>v.value===!0&&e.persistent!==!0);X(se,q=>{q===!0?(ul(m),dl(K)):(St(m),Ct(K))});function ie(){en(()=>{let q=u.value;q&&q.contains(document.activeElement)!==!0&&(q=q.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||q.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||q.querySelector("[autofocus], [data-autofocus]")||q,q.focus({preventScroll:!0}))})}function ce(q){if(f=e.noRefocus===!1?document.activeElement:null,cl(W),F(),z(),t=void 0,q!==void 0&&(e.touchPosition||e.contextMenu)){const G=Ul(q);if(G.left!==void 0){const{top:ye,left:Re}=T.value.getBoundingClientRect();t={left:G.left-Re,top:G.top-ye}}}l===void 0&&(l=X(()=>o.screen.width+"|"+o.screen.height+"|"+e.self+"|"+e.anchor+"|"+o.lang.rtl,y)),e.noFocus!==!0&&document.activeElement.blur(),p(()=>{y(),e.noFocus!==!0&&ie()}),w(()=>{o.platform.is.ios===!0&&(i=e.autoClose,u.value.click()),y(),F(!0),a("show",q)},e.transitionDuration)}function k(q){b(),I(),A(!0),f!==null&&(q===void 0||q.qClickOutside!==!0)&&(((q?.type.indexOf("key")===0?f.closest('[tabindex]:not([tabindex^="-"])'):void 0)||f).focus(),f=null),w(()=>{I(!0),a("hide",q)},e.transitionDuration)}function A(q){t=void 0,l!==void 0&&(l(),l=void 0),(q===!0||v.value===!0)&&(Wt(W),P(),Ct(K),St(m)),q!==!0&&(f=null)}function z(){(T.value!==null||e.scrollTarget!==void 0)&&(C.value=jn(T.value,e.scrollTarget),B(C.value,y))}function j(q){i!==!0?(bo(s,q),a("click",q)):i=!1}function W(q){se.value===!0&&e.noFocus!==!0&&Un(u.value,q.target)!==!0&&ie()}function m(q){e.noEscDismiss!==!0&&(a("escapeKey"),H(q))}function y(){fn({targetEl:u.value,offset:e.offset,anchorEl:T.value,anchorOrigin:te.value,selfOrigin:Q.value,absoluteOffset:t,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function O(){return M(yt,S.value,()=>v.value===!0?M("div",{role:"menu",...r,ref:u,tabindex:-1,class:["q-menu q-position-engine scroll"+N.value,r.class],style:[r.style,_.value],...re.value},we(n.default)):null)}return be(A),Object.assign(s,{focus:ie,updatePosition:y}),$}}),To=Object.keys(Qn);function Bo(e){return To.reduce((n,a)=>{const r=e[a];return r!==void 0&&(n[a]=r),n},{})}const Mo=ae({name:"QBtnDropdown",props:{...Qn,...Ue,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:a}){const{proxy:r}=fe(),f=R(e.modelValue),t=R(null),l=oo(),i=D(()=>{const C={"aria-expanded":f.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l.value,"aria-label":e.toggleAriaLabel||r.$q.lang.label[f.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(C["aria-disabled"]="true"),C}),c=D(()=>"q-btn-dropdown__arrow"+(f.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),s=D(()=>Wn(e)),o=D(()=>Bo(e));X(()=>e.modelValue,C=>{t.value?.[C?"show":"hide"]()}),X(()=>e.split,_);function u(C){f.value=!0,a("beforeShow",C)}function v(C){a("show",C),a("update:modelValue",!0)}function d(C){f.value=!1,a("beforeHide",C)}function g(C){a("hide",C),a("update:modelValue",!1)}function p(C){a("click",C)}function b(C){Te(C),_(),a("click",C)}function w(C){t.value?.toggle(C)}function S(C){t.value?.show(C)}function _(C){t.value?.hide(C)}return Object.assign(r,{show:S,hide:_,toggle:w}),Ke(()=>{e.modelValue===!0&&S()}),()=>{const C=[M(Mt,{class:c.value,name:e.dropdownIcon||r.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&C.push(M(vl,{ref:t,id:l.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:u,onShow:v,onBeforeHide:d,onHide:g},n.default)),e.split===!1?M(ne,{class:"q-btn-dropdown q-btn-dropdown--simple",...o.value,...i.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:p},{default:()=>we(n.label,[]).concat(C),loading:n.loading}):M(ll,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...s.value,glossy:e.glossy,stretch:e.stretch},()=>[M(ne,{class:"q-btn-dropdown--current",...o.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:b},{default:n.label,loading:n.loading}),M(ne,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...i.value,...s.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>C)])}}}),Eo=ae({name:"QTooltip",inheritAttrs:!1,props:{...ol,...on,...Ue,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...Ue.transitionShow,default:"jump-down"},transitionHide:{...Ue.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Dt},self:{type:String,default:"top middle",validator:Dt},offset:{type:Array,default:()=>[14,14],validator:fl},scrollTarget:Nn,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...an],setup(e,{slots:n,emit:a,attrs:r}){let f,t;const l=fe(),{proxy:{$q:i}}=l,c=R(null),s=R(!1),o=D(()=>qt(e.anchor,i.lang.rtl)),u=D(()=>qt(e.self,i.lang.rtl)),v=D(()=>e.persistent!==!0),{registerTick:d,removeTick:g}=cn(),{registerTimeout:p}=dn(),{transitionProps:b,transitionStyle:w}=sn(e),{localScrollTarget:S,changeScrollEvent:_,unconfigureScrollTarget:C}=al(e,ce),{anchorEl:B,canShow:P,anchorEvents:T}=il({showing:s,configureAnchorEl:ie}),{show:E,hide:H}=rn({showing:s,canShow:P,handleShow:K,handleHide:te,hideOnRouteChange:v,processOnMount:!0});Object.assign(T,{delayShow:re,delayHide:se});const{showPortal:F,hidePortal:I,renderPortal:$}=un(l,c,A,"tooltip");if(i.platform.is.mobile===!0){const z={anchorEl:B,innerRef:c,onClickOutside(W){return H(W),W.target.classList.contains("q-dialog__backdrop")&&Ce(W),!0}},j=D(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);X(j,W=>{(W===!0?dl:Ct)(z)}),be(()=>{Ct(z)})}function K(z){F(),d(()=>{t=new MutationObserver(()=>N()),t.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),N(),ce()}),f===void 0&&(f=X(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,N)),p(()=>{F(!0),a("show",z)},e.transitionDuration)}function te(z){g(),I(),Q(),p(()=>{I(!0),a("hide",z)},e.transitionDuration)}function Q(){t!==void 0&&(t.disconnect(),t=void 0),f!==void 0&&(f(),f=void 0),C(),jt(T,"tooltipTemp")}function N(){fn({targetEl:c.value,offset:e.offset,anchorEl:B.value,anchorOrigin:o.value,selfOrigin:u.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function re(z){if(i.platform.is.mobile===!0){Qt(),document.body.classList.add("non-selectable");const j=B.value,W=["touchmove","touchcancel","touchend","click"].map(m=>[j,m,"delayHide","passiveCapture"]);bt(T,"tooltipTemp",W)}p(()=>{E(z)},e.delay)}function se(z){i.platform.is.mobile===!0&&(jt(T,"tooltipTemp"),Qt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),p(()=>{H(z)},e.hideDelay)}function ie(){if(e.noParentEvent===!0||B.value===null)return;const z=i.platform.is.mobile===!0?[[B.value,"touchstart","delayShow","passive"]]:[[B.value,"mouseenter","delayShow","passive"],[B.value,"mouseleave","delayHide","passive"]];bt(T,"anchor",z)}function ce(){if(B.value!==null||e.scrollTarget!==void 0){S.value=jn(B.value,e.scrollTarget);const z=e.noParentEvent===!0?N:H;_(S.value,z)}}function k(){return s.value===!0?M("div",{...r,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,w.value],role:"tooltip"},we(n.default)):null}function A(){return M(yt,b.value,k)}return be(Q),Object.assign(l.proxy,{updatePosition:N}),$}});function hl(e,n,a){n.handler?n.handler(e,a,a.caret):a.runCmd(n.cmd,n.param)}function vn(e){return M("div",{class:"q-editor__toolbar-group"},e)}function gl(e,n,a,r=!1){const f=r||(n.type==="toggle"?n.toggled?n.toggled(e):n.cmd&&e.caret.is(n.cmd,n.param):!1),t=[];if(n.tip&&e.$q.platform.is.desktop){const l=n.key?M("div",[M("small",`(CTRL + ${String.fromCharCode(n.key)})`)]):null;t.push(M(Eo,{delay:1e3},()=>[M("div",{innerHTML:n.tip}),l]))}return M(ne,{...e.buttonProps.value,icon:n.icon!==null?n.icon:void 0,color:f?n.toggleColor||e.props.toolbarToggleColor:n.color||e.props.toolbarColor,textColor:f&&!e.props.toolbarPush?null:n.textColor||e.props.toolbarTextColor,label:n.label,disable:n.disable?typeof n.disable=="function"?n.disable(e):!0:!1,size:"sm",onClick(l){a?.(),hl(l,n,e)}},()=>t)}function Ao(e,n){const a=n.list==="only-icons";let r=n.label,f=n.icon!==null?n.icon:void 0,t,l;function i(){s.component.proxy.hide()}if(a)l=n.options.map(o=>{const u=o.type===void 0?e.caret.is(o.cmd,o.param):!1;return u&&(r=o.tip,f=o.icon!==null?o.icon:void 0),gl(e,o,i,u)}),t=e.toolbarBackgroundClass.value,l=[vn(l)];else{const o=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,u=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,v=n.list==="no-icons";l=n.options.map(d=>{const g=d.disable?d.disable(e):!1,p=d.type===void 0?e.caret.is(d.cmd,d.param):!1;p&&(r=d.tip,f=d.icon!==null?d.icon:void 0);const b=d.htmlTip;return M(ln,{active:p,activeClass:o,clickable:!0,disable:g,dense:!0,onClick(w){i(),w?.qAvoidFocus!==!0&&e.contentRef.value?.focus(),e.caret.restore(),hl(w,d,e)}},()=>[v===!0?null:M(ut,{class:p?o:u,side:!0},()=>M(Mt,{name:d.icon!==null?d.icon:void 0})),M(ut,b?()=>M("div",{class:"text-no-wrap",innerHTML:d.htmlTip}):d.tip?()=>M("div",{class:"text-no-wrap"},d.tip):void 0)])}),t=[e.toolbarBackgroundClass.value,u]}const c=n.highlight&&r!==n.label,s=M(Mo,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:c?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:c&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:n.fixedLabel?n.label:r,icon:n.fixedIcon?n.icon!==null?n.icon:void 0:f,contentClass:t,onShow:o=>e.emit("dropdownShow",o),onHide:o=>e.emit("dropdownHide",o),onBeforeShow:o=>e.emit("dropdownBeforeShow",o),onBeforeHide:o=>e.emit("dropdownBeforeHide",o)},()=>l);return s}function Po(e){if(e.caret)return e.buttons.value.filter(n=>!e.isViewingSource.value||n.find(a=>a.cmd==="viewsource")).map(n=>vn(n.map(a=>e.isViewingSource.value&&a.cmd!=="viewsource"?!1:a.type==="slot"?we(e.slots[a.slot]):a.type==="dropdown"?Ao(e,a):gl(e,a))))}function Lo(e,n,a,r={}){const f=Object.keys(r);if(f.length===0)return{};const t={default_font:{cmd:"fontName",param:e,icon:a,tip:n}};return f.forEach(l=>{const i=r[l];t[l]={cmd:"fontName",param:i,icon:a,tip:i,htmlTip:`<font face="${i}">${i}</font>`}}),t}function Vo(e){if(e.caret){const n=e.props.toolbarColor||e.props.toolbarTextColor;let a=e.editLinkUrl.value;const r=()=>{e.caret.restore(),a!==e.editLinkUrl.value&&document.execCommand("createLink",!1,a===""?" ":a),e.editLinkUrl.value=null};return[M("div",{class:`q-mx-xs text-${n}`},`${e.$q.lang.editor.url}: `),M("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:a,onInput:f=>{Te(f),a=f.target.value},onKeydown:f=>{if(Zt(f)!==!0)switch(f.keyCode){case 13:return Ve(f),r();case 27:Ve(f),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),vn([M(ne,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),M(ne,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:r})])]}}let lt=0;const zo={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Ho=["update:fullscreen","fullscreen"];function Oo(){const e=fe(),{props:n,emit:a,proxy:r}=e;let f,t,l;const i=R(!1);Fn(e)===!0&&X(()=>r.$route.fullPath,()=>{n.noRouteFullscreenExit!==!0&&o()}),X(()=>n.fullscreen,u=>{i.value!==u&&c()}),X(i,u=>{a("update:fullscreen",u),a("fullscreen",u)});function c(){i.value===!0?o():s()}function s(){i.value!==!0&&(i.value=!0,l=r.$el.parentNode,l.replaceChild(t,r.$el),document.body.appendChild(r.$el),lt++,lt===1&&document.body.classList.add("q-body--fullscreen-mixin"),f={handler:o},wt.add(f))}function o(){i.value===!0&&(f!==void 0&&(wt.remove(f),f=void 0),l.replaceChild(r.$el,t),i.value=!1,lt=Math.max(0,lt-1),lt===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return Kn(()=>{t=document.createElement("span")}),Ke(()=>{n.fullscreen===!0&&s()}),be(o),Object.assign(r,{toggleFullscreen:c,setFullscreen:s,exitFullscreen:o}),{inFullscreen:i,toggleFullscreen:c}}const Ro=Object.prototype.toString,$t=Object.prototype.hasOwnProperty,$o=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function Vn(e){if(e!==Object(e)||$o.has(Ro.call(e))===!0||e.constructor&&$t.call(e,"constructor")===!1&&$t.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let n;for(n in e);return n===void 0||$t.call(e,n)}function ml(){let e,n,a,r,f,t,l=arguments[0]||{},i=1,c=!1;const s=arguments.length;for(typeof l=="boolean"&&(c=l,l=arguments[1]||{},i=2),Object(l)!==l&&typeof l!="function"&&(l={}),s===i&&(l=this,i--);i<s;i++)if((e=arguments[i])!==null)for(n in e)a=l[n],r=e[n],l!==r&&(c===!0&&r&&((f=Array.isArray(r))||Vn(r)===!0)?(f===!0?t=Array.isArray(a)===!0?a:[]:t=Vn(a)===!0?a:{},l[n]=ml(c,t,r)):r!==void 0&&(l[n]=r));return l}const xo=ae({name:"QEditor",props:{...Ge,...zo,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(n=>n.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Ho,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:n,emit:a}){const{proxy:r}=fe(),{$q:f}=r,t=Ye(e,f),{inFullscreen:l,toggleFullscreen:i}=Oo(),c=io(),s=R(null),o=R(null),u=R(null),v=R(!1),d=D(()=>!e.readonly&&!e.disable);let g,p,b=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),g=window.getComputedStyle(document.body).fontFamily;const w=D(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),S=D(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!d.value,size:"sm"})),_=D(()=>{const m=f.lang.editor,y=f.iconSet.editor;return{bold:{cmd:"bold",icon:y.bold,tip:m.bold,key:66},italic:{cmd:"italic",icon:y.italic,tip:m.italic,key:73},strike:{cmd:"strikeThrough",icon:y.strikethrough,tip:m.strikethrough,key:83},underline:{cmd:"underline",icon:y.underline,tip:m.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:y.unorderedList,tip:m.unorderedList},ordered:{cmd:"insertOrderedList",icon:y.orderedList,tip:m.orderedList},subscript:{cmd:"subscript",icon:y.subscript,tip:m.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:y.superscript,tip:m.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:O=>O.caret&&!O.caret.can("link"),icon:y.hyperlink,tip:m.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:y.toggleFullscreen,tip:m.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:y.viewSource,tip:m.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:y.quote,tip:m.quote,key:81},left:{cmd:"justifyLeft",icon:y.left,tip:m.left},center:{cmd:"justifyCenter",icon:y.center,tip:m.center},right:{cmd:"justifyRight",icon:y.right,tip:m.right},justify:{cmd:"justifyFull",icon:y.justify,tip:m.justify},print:{type:"no-state",cmd:"print",icon:y.print,tip:m.print,key:80},outdent:{type:"no-state",disable:O=>O.caret&&!O.caret.can("outdent"),cmd:"outdent",icon:y.outdent,tip:m.outdent},indent:{type:"no-state",disable:O=>O.caret&&!O.caret.can("indent"),cmd:"indent",icon:y.indent,tip:m.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:y.removeFormat,tip:m.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:y.hr,tip:m.hr},undo:{type:"no-state",cmd:"undo",icon:y.undo,tip:m.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:y.redo,tip:m.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:y.heading1||y.heading,tip:m.heading1,htmlTip:`<h1 class="q-ma-none">${m.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:y.heading2||y.heading,tip:m.heading2,htmlTip:`<h2 class="q-ma-none">${m.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:y.heading3||y.heading,tip:m.heading3,htmlTip:`<h3 class="q-ma-none">${m.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:y.heading4||y.heading,tip:m.heading4,htmlTip:`<h4 class="q-ma-none">${m.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:y.heading5||y.heading,tip:m.heading5,htmlTip:`<h5 class="q-ma-none">${m.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:y.heading6||y.heading,tip:m.heading6,htmlTip:`<h6 class="q-ma-none">${m.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:y.heading,tip:m.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:y.code,htmlTip:`<code>${m.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:y.size1||y.size,tip:m.size1,htmlTip:`<font size="1">${m.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:y.size2||y.size,tip:m.size2,htmlTip:`<font size="2">${m.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:y.size3||y.size,tip:m.size3,htmlTip:`<font size="3">${m.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:y.size4||y.size,tip:m.size4,htmlTip:`<font size="4">${m.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:y.size5||y.size,tip:m.size5,htmlTip:`<font size="5">${m.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:y.size6||y.size,tip:m.size6,htmlTip:`<font size="6">${m.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:y.size7||y.size,tip:m.size7,htmlTip:`<font size="7">${m.size7}</font>`}}}),C=D(()=>{const m=e.definitions||{},y=e.definitions||e.fonts?ml(!0,{},_.value,m,Lo(g,f.lang.editor.defaultFont,f.iconSet.editor.font,e.fonts)):_.value;return e.toolbar.map(O=>O.map(q=>{if(q.options)return{type:"dropdown",icon:q.icon,label:q.label,size:"sm",dense:!0,fixedLabel:q.fixedLabel,fixedIcon:q.fixedIcon,highlight:q.highlight,list:q.list,options:q.options.map(ye=>y[ye])};const G=y[q];return G?G.type==="no-state"||m[q]&&(G.cmd===void 0||_.value[G.cmd]&&_.value[G.cmd].type==="no-state")?G:Object.assign({type:"toggle"},G):{type:"slot",slot:q}}))}),B={$q:f,props:e,slots:n,emit:a,inFullscreen:l,toggleFullscreen:i,runCmd:A,isViewingSource:v,editLinkUrl:u,toolbarBackgroundClass:w,buttonProps:S,contentRef:o,buttons:C,setContent:k};X(()=>e.modelValue,m=>{b!==m&&(b=m,k(m,!0))}),X(u,m=>{a(`link${m?"Show":"Hide"}`)});const P=D(()=>e.toolbar&&e.toolbar.length!==0),T=D(()=>{const m={},y=O=>{O.key&&(m[O.key]={cmd:O.cmd,param:O.param})};return C.value.forEach(O=>{O.forEach(q=>{q.options?q.options.forEach(y):y(q)})}),m}),E=D(()=>l.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),H=D(()=>`q-editor q-editor--${v.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(l.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(t.value===!0?" q-editor--dark q-dark":"")),F=D(()=>[e.contentClass,"q-editor__content",{col:l.value,"overflow-auto":l.value||e.maxHeight}]),I=D(()=>e.disable===!0?{"aria-disabled":"true"}:{});function $(){if(o.value!==null){const m=`inner${v.value===!0?"Text":"HTML"}`,y=o.value[m];y!==e.modelValue&&(b=y,a("update:modelValue",y))}}function K(m){if(a("keydown",m),m.ctrlKey!==!0||Zt(m)===!0){z();return}const y=m.keyCode,O=T.value[y];if(O!==void 0){const{cmd:q,param:G}=O;Ce(m),A(q,G,!1)}}function te(m){z(),a("click",m)}function Q(m){if(o.value!==null){const{scrollTop:y,scrollHeight:O}=o.value;p=O-y}B.caret.save(),a("blur",m)}function N(m){pe(()=>{o.value!==null&&p!==void 0&&(o.value.scrollTop=o.value.scrollHeight-p)}),a("focus",m)}function re(m){const y=s.value;if(y!==null&&y.contains(m.target)===!0&&(m.relatedTarget===null||y.contains(m.relatedTarget)!==!0)){const O=`inner${v.value===!0?"Text":"HTML"}`;B.caret.restorePosition(o.value[O].length),z()}}function se(m){const y=s.value;y!==null&&y.contains(m.target)===!0&&(m.relatedTarget===null||y.contains(m.relatedTarget)!==!0)&&(B.caret.savePosition(),z())}function ie(){p=void 0}function ce(m){B.caret.save()}function k(m,y){if(o.value!==null){y===!0&&B.caret.savePosition();const O=`inner${v.value===!0?"Text":"HTML"}`;o.value[O]=m,y===!0&&(B.caret.restorePosition(o.value[O].length),z())}}function A(m,y,O=!0){j(),B.caret.restore(),B.caret.apply(m,y,()=>{j(),B.caret.save(),O&&z()})}function z(){setTimeout(()=>{u.value=null,r.$forceUpdate()},1)}function j(){en(()=>{o.value?.focus({preventScroll:!0})})}function W(){return o.value}return Ke(()=>{B.caret=r.caret=new mo(o.value,B),k(e.modelValue),z(),document.addEventListener("selectionchange",ce)}),be(()=>{document.removeEventListener("selectionchange",ce)}),Object.assign(r,{runCmd:A,refreshToolbar:z,focus:j,getContentEl:W}),()=>{let m;if(P.value){const y=[M("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+w.value},Po(B))];u.value!==null&&y.push(M("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+w.value},Vo(B))),m=M("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},y)}return M("div",{ref:s,class:H.value,style:{height:l.value===!0?"100%":null},...I.value,onFocusin:re,onFocusout:se},[m,M("div",{ref:o,style:E.value,class:F.value,contenteditable:d.value,placeholder:e.placeholder,...c.listeners.value,onInput:$,onKeydown:K,onClick:te,onBlur:Q,onFocus:N,onMousedown:ie,onTouchstartPassive:ie})])}}}),Fo=Jt("documents",()=>{const e=R([]),n=me.user(),a=n._.sea,r=n.is?.pub;function f(u){if(u){if(typeof u=="string"){const v=u.toLowerCase();return v==="viewer"||v==="editor"?v:void 0}if(typeof u=="object"){const v=Object.keys(u)[0];if(v==="viewer"||v==="editor")return v}}}async function t(u){const[v,d,g,p]=await Promise.all([new Promise(b=>u.get("title").once(w=>b(w))),new Promise(b=>u.get("owners").get(r).once(w=>b(!!w))),new Promise(b=>u.get("roles").get(r).once(w=>b(w))),new Promise(b=>u.get("creatorAlias").once(w=>b(w)))]);return{title:v,isOwner:d,roleVal:g,creatorAlias:p}}async function l(u="Untitled"){if(!r){ke.create({type:"negative",message:"User not authenticated"});return}const v=`${Date.now().toString(36)}${Math.random().toString(36).slice(2,8)}`,d=Math.random().toString(36).slice(2)+Math.random().toString(36).slice(2),g=await ve.secret(a.epub,a),p=await ve.encrypt(d,g),b=me.get("documents").get(v);b.get("title").put(u),b.get("created").put(Date.now());const w=await new Promise(S=>n.get("alias").once(_=>S(_)));b.get("creatorAlias").put(w||"unknown"),b.get("owners").get(r).put(!0),b.get("keys").get(r).put(p),b.get("keyEncryptor").get(r).put(a.epub),n.get("docs").get(v).put(!0),ke.create({type:"positive",message:"Document created"})}function i(u,v,d="editor"){const g=me.get("documents").get(u);me.get("~@"+v).once(p=>{(()=>{if(!p){ke.create({type:"negative",message:"Alias not found"});return}const b=Object.keys(p).find(S=>S.slice(0,1)==="~");if(!b){ke.create({type:"negative",message:"Target pub key not found"});return}const w=b.replace(/^~/,"");me.get("~"+w).get("epub").once(async S=>{if(!S){ke.create({type:"negative",message:"Recipient epub not found"});return}g.get("keys").get(r).once(async _=>{if(!_){ke.create({type:"negative",message:"Cannot access encryption key"});return}const C=await ve.secret(a.epub,a),B=await ve.decrypt(_,C);if(!B){ke.create({type:"negative",message:"Failed to decrypt key"});return}const P=await ve.secret(S,a),T=await ve.encrypt(B,P);g.get("keys").get(w).put(T),g.get("keyEncryptor").get(w).put(a.epub),g.get("roles").get(w).put(d),ke.create({type:"positive",message:`Shared with ${v}`})})})})()})}function c(){if(!r)return;e.value.length=0;const u=(v,d,g,p)=>{if(e.value.some(w=>w.id===v))return;const b={id:v,title:g||"Untitled",role:d,creator:p||""};e.value.push(b),me.get("documents").get(v).get("roles").get(r).on(w=>{const S=f(w)||"viewer";b.role!=="owner"&&b.role!==S&&(b.role=S)})};n.get("docs").map().once((v,d)=>{if(!v)return;const g=me.get("documents").get(d);t(g).then(({title:p,isOwner:b,roleVal:w,creatorAlias:S})=>{const _=f(w);u(d,b?"owner":_||"viewer",p,S)}).catch(()=>{})}),me.get("documents").map().on((v,d)=>{if(!d)return;const g=me.get("documents").get(d);t(g).then(({title:p,roleVal:b,creatorAlias:w})=>{if(!b)return;const _=f(b)||"viewer";u(d,_,p,w)}).catch(()=>{})})}function s(u,v){me.get("documents").get(u).get("title").put(v);const g=e.value.find(p=>p.id===u);g&&(g.title=v)}function o(u){if(!r){ke.create({type:"negative",message:"User not authenticated"});return}const v=me.get("documents").get(u);n.get("docs").get(u).put(null),v.get("owners").get(r).put(null),v.get("roles").get(r).put(null),v.get("keys").get(r).put(null),v.put(null),e.value=e.value.filter(d=>d.id!==u),ke.create({type:"positive",message:"Document deleted"})}return{docs:e,createDocument:l,shareDocument:i,loadDocuments:c,renameDocument:s,deleteDocument:o}}),pl=Jt("editor",()=>{const e=R(""),n=R(null);let a=null,r=null,f="",t=null,l=null,i=null;const c=Ql(),s=R(null),o=R(""),u=R(!0),v=me.user(),d=v._.sea,g=v.is?.pub;async function p(){if(!r||!a||!l)return;const T=await new Promise(F=>l.once(I=>F(I)));let E="";if(typeof T=="string"){const F=await ve.decrypt(T,r);typeof F=="string"&&(E=F)}const H=o.value;if(E){if(i!==null&&i===H){const F=typeof T=="string"?T:await ve.encrypt(E,r);f=F,a.put(F),l.put(null),i=null;return}if(E===H){l.put(null),i=null;return}s.value={local:E,remote:H}}}async function b(){if(!s.value||!r)return;const T=await ve.encrypt(s.value.local,r);f=T,a.put(T),l.put(null),e.value=s.value.local,s.value=null}function w(){s.value&&(l.put(null),e.value=s.value.remote,s.value=null,i=null)}async function S(T){if(!r)return;const E=await ve.encrypt(T,r);f=E,a&&a.put(E),l&&l.put(null),e.value=T,s.value=null,i=null}X(()=>c.isOnline,async(T,E)=>{!T&&E&&(i=e.value),T&&!E&&(await new Promise(H=>setTimeout(H,1e4)),p().catch(H=>{console.error(H)}))}),X(o,async()=>{c.isOnline&&i!==null&&await p()});async function _(T){if(!g)return;t&&a&&(a.off(),t=null),n.value=T,u.value=!1,e.value="",f="",r=null;const E=me.get("documents").get(T),H=await new Promise(Q=>{E.get("keys").get(g).once(N=>Q(N))});if(!H){console.error("Encrypted key not found");return}const I=[await new Promise(Q=>{E.get("keyEncryptor").get(g).once(N=>Q(N))}),d.epub].filter(Boolean);let $;for(const Q of I)try{const N=await ve.secret(Q,d),re=await ve.decrypt(H,N);if(typeof re=="string"){$=re;break}}catch{}if(!$){console.error("Failed to decrypt symmetric key for document");return}r=$;const[K,te]=await Promise.all([new Promise(Q=>{E.get("roles").get(g).once(N=>Q(N),{wait:1500})}),new Promise(Q=>{E.get("owners").get(g).once(N=>Q(!!N))})]);K==="viewer"?u.value=!1:K==="editor"?u.value=!0:u.value=te,a=E.get("text"),l=E.get("drafts").get(g),l.once(async Q=>{if(Q&&r)try{const N=await ve.decrypt(Q,r);typeof N=="string"&&(e.value=N)}catch{}}),t=a.on(async Q=>{if(typeof Q!="string"||!r)return;const N=await ve.decrypt(Q,r);typeof N=="string"&&(o.value=N,N!==e.value&&Q!==f&&(e.value=N))}),E.get("roles").get(g).on(Q=>{Q==="viewer"?u.value=!1:Q==="editor"&&(u.value=!0)})}let C=null;async function B(T){if(!r||T==="")return;const E=await ve.encrypt(T,r);if(c.isOnline&&a){if(E===f)return;a.put(E)}else l&&l.put(E);f=E}X(e,T=>{r&&T!==""&&u.value&&(C&&clearTimeout(C),C=setTimeout(async()=>{await B(T)},300))});function P(){C&&(clearTimeout(C),C=null,B(e.value)),t&&a&&a.off(),n.value=null,e.value="",r=null}return{content:e,active:n,conflict:s,canEdit:u,openDocument:_,close:P,keepLocal:b,acceptRemote:w,applyMerge:S}}),st=Jt("dialog",()=>{const e=R(!1),n=R(!1),a=R(!1),r=R(!1),f=R(null),t=R(null),l=R(null);function i(){e.value=!0}function c(){e.value=!1}function s(p){f.value=p,n.value=!0}function o(){n.value=!1,f.value=null}function u(p){t.value=p,a.value=!0}function v(){a.value=!1,t.value=null}function d(p){l.value=p,r.value=!0}function g(){r.value=!1,l.value=null}return{newDocumentDialog:e,renameDocumentDialog:n,shareDocumentDialog:a,deleteDocumentDialog:r,renameDocument:f,shareDocument:t,deleteDocument:l,openNewDocumentDialog:i,closeNewDocumentDialog:c,openRenameDocumentDialog:s,closeRenameDocumentDialog:o,openShareDocumentDialog:u,closeShareDocumentDialog:v,openDeleteDocumentDialog:d,closeDeleteDocumentDialog:g}}),De=ae({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:n}){const a=D(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>M(e.tag,{class:a.value},we(n.default))}}),Io={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},xt={xs:2,sm:4,md:8,lg:16,xl:24},No=ae({name:"QSeparator",props:{...Ge,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const n=fe(),a=Ye(e,n.proxy.$q),r=D(()=>e.vertical===!0?"vertical":"horizontal"),f=D(()=>` q-separator--${r.value}`),t=D(()=>e.inset!==!1?`${f.value}-${Io[e.inset]}`:""),l=D(()=>`q-separator${f.value}${t.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),i=D(()=>{const c={};if(e.size!==void 0&&(c[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const s=e.spaced===!0?`${xt.md}px`:e.spaced in xt?`${xt[e.spaced]}px`:e.spaced,o=e.vertical===!0?["Left","Right"]:["Top","Bottom"];c[`margin${o[0]}`]=c[`margin${o[1]}`]=s}return c});return()=>M("hr",{class:l.value,style:i.value,"aria-orientation":r.value})}}),jo=ae({name:"QBtnToggle",props:{...Yn,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(n=>("label"in n||"icon"in n||"slot"in n)&&"value"in n)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:n,emit:a}){const r=D(()=>e.options.find(v=>v.value===e.modelValue)!==void 0),f=D(()=>({type:"hidden",name:e.name,value:e.modelValue})),t=ao(f),l=D(()=>Wn(e)),i=D(()=>({rounded:e.rounded,dense:e.dense,...l.value})),c=D(()=>e.options.map((v,d)=>{const{attrs:g,value:p,slot:b,...w}=v;return{slot:b,props:{key:d,"aria-pressed":p===e.modelValue?"true":"false",...g,...w,...i.value,disable:e.disable===!0||w.disable===!0,color:p===e.modelValue?o(w,"toggleColor"):o(w,"color"),textColor:p===e.modelValue?o(w,"toggleTextColor"):o(w,"textColor"),noCaps:o(w,"noCaps")===!0,noWrap:o(w,"noWrap")===!0,size:o(w,"size"),padding:o(w,"padding"),ripple:o(w,"ripple"),stack:o(w,"stack")===!0,stretch:o(w,"stretch")===!0,onClick(S){s(p,v,S)}}}}));function s(v,d,g){e.readonly!==!0&&(e.modelValue===v?e.clearable===!0&&(a("update:modelValue",null,null),a("clear")):a("update:modelValue",v,d),a("click",g))}function o(v,d){return v[d]===void 0?e[d]:v[d]}function u(){const v=c.value.map(d=>M(ne,d.props,d.slot!==void 0?n[d.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&r.value===!0&&t(v,"push"),Xt(n.default,v)}return()=>M(ll,{class:"q-btn-toggle",...l.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},u)}}),ct=ae({name:"QCardActions",props:{...Wl,vertical:Boolean},setup(e,{slots:n}){const a=Kl(e),r=D(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>M("div",{class:r.value},we(n.default))}}),dt=ae({name:"QCard",props:{...Ge,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:n}){const{proxy:{$q:a}}=fe(),r=Ye(e,a),f=D(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>M(e.tag,{class:f.value},we(n.default))}});function Uo(e,n,a){let r;function f(){r!==void 0&&(wt.remove(r),r=void 0)}return be(()=>{e.value===!0&&f()}),{removeFromHistory:f,addToHistory(){r={condition:()=>a.value===!0,handler:n},wt.add(r)}}}function Qo(){let e;return{preventBodyScroll(n){n!==e&&(e!==void 0||n===!0)&&(e=n,Xl(n))}}}let pt=0;const Wo={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},zn={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},Ze=ae({name:"QDialog",inheritAttrs:!1,props:{...on,...Ue,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...an,"shake","click","escapeKey"],setup(e,{slots:n,emit:a,attrs:r}){const f=fe(),t=R(null),l=R(!1),i=R(!1);let c=null,s=null,o,u;const v=D(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:d}=Qo(),{registerTimeout:g}=dn(),{registerTick:p,removeTick:b}=cn(),{transitionProps:w,transitionStyle:S}=sn(e,()=>zn[e.position][0],()=>zn[e.position][1]),_=D(()=>S.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:C,hidePortal:B,portalIsAccessible:P,renderPortal:T}=un(f,t,W,"dialog"),{hide:E}=rn({showing:l,hideOnRouteChange:v,handleShow:Q,handleHide:N,processOnMount:!0}),{addToHistory:H,removeFromHistory:F}=Uo(l,E,v),I=D(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Wo[e.position]}`+(i.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),$=D(()=>l.value===!0&&e.seamless!==!0),K=D(()=>e.autoClose===!0?{onClick:A}:{}),te=D(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${$.value===!0?"modal":"seamless"}`,r.class]);X(()=>e.maximized,m=>{l.value===!0&&k(m)}),X($,m=>{d(m),m===!0?(cl(j),ul(ie)):(Wt(j),St(ie))});function Q(m){H(),s=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,k(e.maximized),C(),i.value=!0,e.noFocus!==!0?(document.activeElement?.blur(),p(re)):b(),g(()=>{if(f.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:y,bottom:O}=document.activeElement.getBoundingClientRect(),{innerHeight:q}=window,G=window.visualViewport!==void 0?window.visualViewport.height:q;y>0&&O>G/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-G,O>=q?1/0:Math.ceil(document.scrollingElement.scrollTop+O-G/2))),document.activeElement.scrollIntoView()}u=!0,t.value.click(),u=!1}C(!0),i.value=!1,a("show",m)},e.transitionDuration)}function N(m){b(),F(),ce(!0),i.value=!0,B(),s!==null&&(((m?.type.indexOf("key")===0?s.closest('[tabindex]:not([tabindex^="-"])'):void 0)||s).focus(),s=null),g(()=>{B(!0),i.value=!1,a("hide",m)},e.transitionDuration)}function re(m){en(()=>{let y=t.value;if(y!==null){if(m!==void 0){const O=y.querySelector(m);if(O!==null){O.focus({preventScroll:!0});return}}y.contains(document.activeElement)!==!0&&(y=y.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||y.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||y.querySelector("[autofocus], [data-autofocus]")||y,y.focus({preventScroll:!0}))}})}function se(m){m&&typeof m.focus=="function"?m.focus({preventScroll:!0}):re(),a("shake");const y=t.value;y!==null&&(y.classList.remove("q-animate--scale"),y.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,t.value!==null&&(y.classList.remove("q-animate--scale"),re())},170))}function ie(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&se():(a("escapeKey"),E()))}function ce(m){c!==null&&(clearTimeout(c),c=null),(m===!0||l.value===!0)&&(k(!1),e.seamless!==!0&&(d(!1),Wt(j),St(ie))),m!==!0&&(s=null)}function k(m){m===!0?o!==!0&&(pt<1&&document.body.classList.add("q-body--dialog"),pt++,o=!0):o===!0&&(pt<2&&document.body.classList.remove("q-body--dialog"),pt--,o=!1)}function A(m){u!==!0&&(E(m),a("click",m))}function z(m){e.persistent!==!0&&e.noBackdropDismiss!==!0?E(m):e.noShake!==!0&&se()}function j(m){e.allowFocusOutside!==!0&&P.value===!0&&Un(t.value,m.target)!==!0&&re('[tabindex]:not([tabindex="-1"])')}Object.assign(f.proxy,{focus:re,shake:se,__updateRefocusTarget(m){s=m||null}}),be(ce);function W(){return M("div",{role:"dialog","aria-modal":$.value===!0?"true":"false",...r,class:te.value},[M(yt,{name:"q-transition--fade",appear:!0},()=>$.value===!0?M("div",{class:"q-dialog__backdrop fixed-full",style:_.value,"aria-hidden":"true",tabindex:-1,onClick:z}):null),M(yt,w.value,()=>l.value===!0?M("div",{ref:t,class:I.value,style:S.value,tabindex:-1,...K.value},we(n.default)):null)])}return T}});var Ft={exports:{}},Hn;function Ko(){return Hn||(Hn=1,function(e){var n=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},a=-1,r=1,f=0;n.Diff=function(t,l){return[t,l]},n.prototype.diff_main=function(t,l,i,c){typeof c>"u"&&(this.Diff_Timeout<=0?c=Number.MAX_VALUE:c=new Date().getTime()+this.Diff_Timeout*1e3);var s=c;if(t==null||l==null)throw new Error("Null input. (diff_main)");if(t==l)return t?[new n.Diff(f,t)]:[];typeof i>"u"&&(i=!0);var o=i,u=this.diff_commonPrefix(t,l),v=t.substring(0,u);t=t.substring(u),l=l.substring(u),u=this.diff_commonSuffix(t,l);var d=t.substring(t.length-u);t=t.substring(0,t.length-u),l=l.substring(0,l.length-u);var g=this.diff_compute_(t,l,o,s);return v&&g.unshift(new n.Diff(f,v)),d&&g.push(new n.Diff(f,d)),this.diff_cleanupMerge(g),g},n.prototype.diff_compute_=function(t,l,i,c){var s;if(!t)return[new n.Diff(r,l)];if(!l)return[new n.Diff(a,t)];var o=t.length>l.length?t:l,u=t.length>l.length?l:t,v=o.indexOf(u);if(v!=-1)return s=[new n.Diff(r,o.substring(0,v)),new n.Diff(f,u),new n.Diff(r,o.substring(v+u.length))],t.length>l.length&&(s[0][0]=s[2][0]=a),s;if(u.length==1)return[new n.Diff(a,t),new n.Diff(r,l)];var d=this.diff_halfMatch_(t,l);if(d){var g=d[0],p=d[1],b=d[2],w=d[3],S=d[4],_=this.diff_main(g,b,i,c),C=this.diff_main(p,w,i,c);return _.concat([new n.Diff(f,S)],C)}return i&&t.length>100&&l.length>100?this.diff_lineMode_(t,l,c):this.diff_bisect_(t,l,c)},n.prototype.diff_lineMode_=function(t,l,i){var c=this.diff_linesToChars_(t,l);t=c.chars1,l=c.chars2;var s=c.lineArray,o=this.diff_main(t,l,!1,i);this.diff_charsToLines_(o,s),this.diff_cleanupSemantic(o),o.push(new n.Diff(f,""));for(var u=0,v=0,d=0,g="",p="";u<o.length;){switch(o[u][0]){case r:d++,p+=o[u][1];break;case a:v++,g+=o[u][1];break;case f:if(v>=1&&d>=1){o.splice(u-v-d,v+d),u=u-v-d;for(var b=this.diff_main(g,p,!1,i),w=b.length-1;w>=0;w--)o.splice(u,0,b[w]);u=u+b.length}d=0,v=0,g="",p="";break}u++}return o.pop(),o},n.prototype.diff_bisect_=function(t,l,i){for(var c=t.length,s=l.length,o=Math.ceil((c+s)/2),u=o,v=2*o,d=new Array(v),g=new Array(v),p=0;p<v;p++)d[p]=-1,g[p]=-1;d[u+1]=0,g[u+1]=0;for(var b=c-s,w=b%2!=0,S=0,_=0,C=0,B=0,P=0;P<o&&!(new Date().getTime()>i);P++){for(var T=-P+S;T<=P-_;T+=2){var E=u+T,H;T==-P||T!=P&&d[E-1]<d[E+1]?H=d[E+1]:H=d[E-1]+1;for(var F=H-T;H<c&&F<s&&t.charAt(H)==l.charAt(F);)H++,F++;if(d[E]=H,H>c)_+=2;else if(F>s)S+=2;else if(w){var I=u+b-T;if(I>=0&&I<v&&g[I]!=-1){var $=c-g[I];if(H>=$)return this.diff_bisectSplit_(t,l,H,F,i)}}}for(var K=-P+C;K<=P-B;K+=2){var I=u+K,$;K==-P||K!=P&&g[I-1]<g[I+1]?$=g[I+1]:$=g[I-1]+1;for(var te=$-K;$<c&&te<s&&t.charAt(c-$-1)==l.charAt(s-te-1);)$++,te++;if(g[I]=$,$>c)B+=2;else if(te>s)C+=2;else if(!w){var E=u+b-K;if(E>=0&&E<v&&d[E]!=-1){var H=d[E],F=u+H-E;if($=c-$,H>=$)return this.diff_bisectSplit_(t,l,H,F,i)}}}}return[new n.Diff(a,t),new n.Diff(r,l)]},n.prototype.diff_bisectSplit_=function(t,l,i,c,s){var o=t.substring(0,i),u=l.substring(0,c),v=t.substring(i),d=l.substring(c),g=this.diff_main(o,u,!1,s),p=this.diff_main(v,d,!1,s);return g.concat(p)},n.prototype.diff_linesToChars_=function(t,l){var i=[],c={};i[0]="";function s(d){for(var g="",p=0,b=-1,w=i.length;b<d.length-1;){b=d.indexOf(`
`,p),b==-1&&(b=d.length-1);var S=d.substring(p,b+1);(c.hasOwnProperty?c.hasOwnProperty(S):c[S]!==void 0)?g+=String.fromCharCode(c[S]):(w==o&&(S=d.substring(p),b=d.length),g+=String.fromCharCode(w),c[S]=w,i[w++]=S),p=b+1}return g}var o=4e4,u=s(t);o=65535;var v=s(l);return{chars1:u,chars2:v,lineArray:i}},n.prototype.diff_charsToLines_=function(t,l){for(var i=0;i<t.length;i++){for(var c=t[i][1],s=[],o=0;o<c.length;o++)s[o]=l[c.charCodeAt(o)];t[i][1]=s.join("")}},n.prototype.diff_commonPrefix=function(t,l){if(!t||!l||t.charAt(0)!=l.charAt(0))return 0;for(var i=0,c=Math.min(t.length,l.length),s=c,o=0;i<s;)t.substring(o,s)==l.substring(o,s)?(i=s,o=i):c=s,s=Math.floor((c-i)/2+i);return s},n.prototype.diff_commonSuffix=function(t,l){if(!t||!l||t.charAt(t.length-1)!=l.charAt(l.length-1))return 0;for(var i=0,c=Math.min(t.length,l.length),s=c,o=0;i<s;)t.substring(t.length-s,t.length-o)==l.substring(l.length-s,l.length-o)?(i=s,o=i):c=s,s=Math.floor((c-i)/2+i);return s},n.prototype.diff_commonOverlap_=function(t,l){var i=t.length,c=l.length;if(i==0||c==0)return 0;i>c?t=t.substring(i-c):i<c&&(l=l.substring(0,i));var s=Math.min(i,c);if(t==l)return s;for(var o=0,u=1;;){var v=t.substring(s-u),d=l.indexOf(v);if(d==-1)return o;u+=d,(d==0||t.substring(s-u)==l.substring(0,u))&&(o=u,u++)}},n.prototype.diff_halfMatch_=function(t,l){if(this.Diff_Timeout<=0)return null;var i=t.length>l.length?t:l,c=t.length>l.length?l:t;if(i.length<4||c.length*2<i.length)return null;var s=this;function o(_,C,B){for(var P=_.substring(B,B+Math.floor(_.length/4)),T=-1,E="",H,F,I,$;(T=C.indexOf(P,T+1))!=-1;){var K=s.diff_commonPrefix(_.substring(B),C.substring(T)),te=s.diff_commonSuffix(_.substring(0,B),C.substring(0,T));E.length<te+K&&(E=C.substring(T-te,T)+C.substring(T,T+K),H=_.substring(0,B-te),F=_.substring(B+K),I=C.substring(0,T-te),$=C.substring(T+K))}return E.length*2>=_.length?[H,F,I,$,E]:null}var u=o(i,c,Math.ceil(i.length/4)),v=o(i,c,Math.ceil(i.length/2)),d;if(!u&&!v)return null;v?u?d=u[4].length>v[4].length?u:v:d=v:d=u;var g,p,b,w;t.length>l.length?(g=d[0],p=d[1],b=d[2],w=d[3]):(b=d[0],w=d[1],g=d[2],p=d[3]);var S=d[4];return[g,p,b,w,S]},n.prototype.diff_cleanupSemantic=function(t){for(var l=!1,i=[],c=0,s=null,o=0,u=0,v=0,d=0,g=0;o<t.length;)t[o][0]==f?(i[c++]=o,u=d,v=g,d=0,g=0,s=t[o][1]):(t[o][0]==r?d+=t[o][1].length:g+=t[o][1].length,s&&s.length<=Math.max(u,v)&&s.length<=Math.max(d,g)&&(t.splice(i[c-1],0,new n.Diff(a,s)),t[i[c-1]+1][0]=r,c--,c--,o=c>0?i[c-1]:-1,u=0,v=0,d=0,g=0,s=null,l=!0)),o++;for(l&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(t[o-1][0]==a&&t[o][0]==r){var p=t[o-1][1],b=t[o][1],w=this.diff_commonOverlap_(p,b),S=this.diff_commonOverlap_(b,p);w>=S?(w>=p.length/2||w>=b.length/2)&&(t.splice(o,0,new n.Diff(f,b.substring(0,w))),t[o-1][1]=p.substring(0,p.length-w),t[o+1][1]=b.substring(w),o++):(S>=p.length/2||S>=b.length/2)&&(t.splice(o,0,new n.Diff(f,p.substring(0,S))),t[o-1][0]=r,t[o-1][1]=b.substring(0,b.length-S),t[o+1][0]=a,t[o+1][1]=p.substring(S),o++),o++}o++}},n.prototype.diff_cleanupSemanticLossless=function(t){function l(S,_){if(!S||!_)return 6;var C=S.charAt(S.length-1),B=_.charAt(0),P=C.match(n.nonAlphaNumericRegex_),T=B.match(n.nonAlphaNumericRegex_),E=P&&C.match(n.whitespaceRegex_),H=T&&B.match(n.whitespaceRegex_),F=E&&C.match(n.linebreakRegex_),I=H&&B.match(n.linebreakRegex_),$=F&&S.match(n.blanklineEndRegex_),K=I&&_.match(n.blanklineStartRegex_);return $||K?5:F||I?4:P&&!E&&H?3:E||H?2:P||T?1:0}for(var i=1;i<t.length-1;){if(t[i-1][0]==f&&t[i+1][0]==f){var c=t[i-1][1],s=t[i][1],o=t[i+1][1],u=this.diff_commonSuffix(c,s);if(u){var v=s.substring(s.length-u);c=c.substring(0,c.length-u),s=v+s.substring(0,s.length-u),o=v+o}for(var d=c,g=s,p=o,b=l(c,s)+l(s,o);s.charAt(0)===o.charAt(0);){c+=s.charAt(0),s=s.substring(1)+o.charAt(0),o=o.substring(1);var w=l(c,s)+l(s,o);w>=b&&(b=w,d=c,g=s,p=o)}t[i-1][1]!=d&&(d?t[i-1][1]=d:(t.splice(i-1,1),i--),t[i][1]=g,p?t[i+1][1]=p:(t.splice(i+1,1),i--))}i++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(t){for(var l=!1,i=[],c=0,s=null,o=0,u=!1,v=!1,d=!1,g=!1;o<t.length;)t[o][0]==f?(t[o][1].length<this.Diff_EditCost&&(d||g)?(i[c++]=o,u=d,v=g,s=t[o][1]):(c=0,s=null),d=g=!1):(t[o][0]==a?g=!0:d=!0,s&&(u&&v&&d&&g||s.length<this.Diff_EditCost/2&&u+v+d+g==3)&&(t.splice(i[c-1],0,new n.Diff(a,s)),t[i[c-1]+1][0]=r,c--,s=null,u&&v?(d=g=!0,c=0):(c--,o=c>0?i[c-1]:-1,d=g=!1),l=!0)),o++;l&&this.diff_cleanupMerge(t)},n.prototype.diff_cleanupMerge=function(t){t.push(new n.Diff(f,""));for(var l=0,i=0,c=0,s="",o="",u;l<t.length;)switch(t[l][0]){case r:c++,o+=t[l][1],l++;break;case a:i++,s+=t[l][1],l++;break;case f:i+c>1?(i!==0&&c!==0&&(u=this.diff_commonPrefix(o,s),u!==0&&(l-i-c>0&&t[l-i-c-1][0]==f?t[l-i-c-1][1]+=o.substring(0,u):(t.splice(0,0,new n.Diff(f,o.substring(0,u))),l++),o=o.substring(u),s=s.substring(u)),u=this.diff_commonSuffix(o,s),u!==0&&(t[l][1]=o.substring(o.length-u)+t[l][1],o=o.substring(0,o.length-u),s=s.substring(0,s.length-u))),l-=i+c,t.splice(l,i+c),s.length&&(t.splice(l,0,new n.Diff(a,s)),l++),o.length&&(t.splice(l,0,new n.Diff(r,o)),l++),l++):l!==0&&t[l-1][0]==f?(t[l-1][1]+=t[l][1],t.splice(l,1)):l++,c=0,i=0,s="",o="";break}t[t.length-1][1]===""&&t.pop();var v=!1;for(l=1;l<t.length-1;)t[l-1][0]==f&&t[l+1][0]==f&&(t[l][1].substring(t[l][1].length-t[l-1][1].length)==t[l-1][1]?(t[l][1]=t[l-1][1]+t[l][1].substring(0,t[l][1].length-t[l-1][1].length),t[l+1][1]=t[l-1][1]+t[l+1][1],t.splice(l-1,1),v=!0):t[l][1].substring(0,t[l+1][1].length)==t[l+1][1]&&(t[l-1][1]+=t[l+1][1],t[l][1]=t[l][1].substring(t[l+1][1].length)+t[l+1][1],t.splice(l+1,1),v=!0)),l++;v&&this.diff_cleanupMerge(t)},n.prototype.diff_xIndex=function(t,l){var i=0,c=0,s=0,o=0,u;for(u=0;u<t.length&&(t[u][0]!==r&&(i+=t[u][1].length),t[u][0]!==a&&(c+=t[u][1].length),!(i>l));u++)s=i,o=c;return t.length!=u&&t[u][0]===a?o:o+(l-s)},n.prototype.diff_prettyHtml=function(t){for(var l=[],i=/&/g,c=/</g,s=/>/g,o=/\n/g,u=0;u<t.length;u++){var v=t[u][0],d=t[u][1],g=d.replace(i,"&amp;").replace(c,"&lt;").replace(s,"&gt;").replace(o,"&para;<br>");switch(v){case r:l[u]='<ins style="background:#e6ffe6;">'+g+"</ins>";break;case a:l[u]='<del style="background:#ffe6e6;">'+g+"</del>";break;case f:l[u]="<span>"+g+"</span>";break}}return l.join("")},n.prototype.diff_text1=function(t){for(var l=[],i=0;i<t.length;i++)t[i][0]!==r&&(l[i]=t[i][1]);return l.join("")},n.prototype.diff_text2=function(t){for(var l=[],i=0;i<t.length;i++)t[i][0]!==a&&(l[i]=t[i][1]);return l.join("")},n.prototype.diff_levenshtein=function(t){for(var l=0,i=0,c=0,s=0;s<t.length;s++){var o=t[s][0],u=t[s][1];switch(o){case r:i+=u.length;break;case a:c+=u.length;break;case f:l+=Math.max(i,c),i=0,c=0;break}}return l+=Math.max(i,c),l},n.prototype.diff_toDelta=function(t){for(var l=[],i=0;i<t.length;i++)switch(t[i][0]){case r:l[i]="+"+encodeURI(t[i][1]);break;case a:l[i]="-"+t[i][1].length;break;case f:l[i]="="+t[i][1].length;break}return l.join("	").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(t,l){for(var i=[],c=0,s=0,o=l.split(/\t/g),u=0;u<o.length;u++){var v=o[u].substring(1);switch(o[u].charAt(0)){case"+":try{i[c++]=new n.Diff(r,decodeURI(v))}catch{throw new Error("Illegal escape in diff_fromDelta: "+v)}break;case"-":case"=":var d=parseInt(v,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+v);var g=t.substring(s,s+=d);o[u].charAt(0)=="="?i[c++]=new n.Diff(f,g):i[c++]=new n.Diff(a,g);break;default:if(o[u])throw new Error("Invalid diff operation in diff_fromDelta: "+o[u])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return i},n.prototype.match_main=function(t,l,i){if(t==null||l==null||i==null)throw new Error("Null input. (match_main)");return i=Math.max(0,Math.min(i,t.length)),t==l?0:t.length?t.substring(i,i+l.length)==l?i:this.match_bitap_(t,l,i):-1},n.prototype.match_bitap_=function(t,l,i){if(l.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var c=this.match_alphabet_(l),s=this;function o(H,F){var I=H/l.length,$=Math.abs(i-F);return s.Match_Distance?I+$/s.Match_Distance:$?1:I}var u=this.Match_Threshold,v=t.indexOf(l,i);v!=-1&&(u=Math.min(o(0,v),u),v=t.lastIndexOf(l,i+l.length),v!=-1&&(u=Math.min(o(0,v),u)));var d=1<<l.length-1;v=-1;for(var g,p,b=l.length+t.length,w,S=0;S<l.length;S++){for(g=0,p=b;g<p;)o(S,i+p)<=u?g=p:b=p,p=Math.floor((b-g)/2+g);b=p;var _=Math.max(1,i-p+1),C=Math.min(i+p,t.length)+l.length,B=Array(C+2);B[C+1]=(1<<S)-1;for(var P=C;P>=_;P--){var T=c[t.charAt(P-1)];if(S===0?B[P]=(B[P+1]<<1|1)&T:B[P]=(B[P+1]<<1|1)&T|((w[P+1]|w[P])<<1|1)|w[P+1],B[P]&d){var E=o(S,P-1);if(E<=u)if(u=E,v=P-1,v>i)_=Math.max(1,2*i-v);else break}}if(o(S+1,i)>u)break;w=B}return v},n.prototype.match_alphabet_=function(t){for(var l={},i=0;i<t.length;i++)l[t.charAt(i)]=0;for(var i=0;i<t.length;i++)l[t.charAt(i)]|=1<<t.length-i-1;return l},n.prototype.patch_addContext_=function(t,l){if(l.length!=0){if(t.start2===null)throw Error("patch not initialized");for(var i=l.substring(t.start2,t.start2+t.length1),c=0;l.indexOf(i)!=l.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)c+=this.Patch_Margin,i=l.substring(t.start2-c,t.start2+t.length1+c);c+=this.Patch_Margin;var s=l.substring(t.start2-c,t.start2);s&&t.diffs.unshift(new n.Diff(f,s));var o=l.substring(t.start2+t.length1,t.start2+t.length1+c);o&&t.diffs.push(new n.Diff(f,o)),t.start1-=s.length,t.start2-=s.length,t.length1+=s.length+o.length,t.length2+=s.length+o.length}},n.prototype.patch_make=function(t,l,i){var c,s;if(typeof t=="string"&&typeof l=="string"&&typeof i>"u")c=t,s=this.diff_main(c,l,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(t&&typeof t=="object"&&typeof l>"u"&&typeof i>"u")s=t,c=this.diff_text1(s);else if(typeof t=="string"&&l&&typeof l=="object"&&typeof i>"u")c=t,s=l;else if(typeof t=="string"&&typeof l=="string"&&i&&typeof i=="object")c=t,s=i;else throw new Error("Unknown call format to patch_make.");if(s.length===0)return[];for(var o=[],u=new n.patch_obj,v=0,d=0,g=0,p=c,b=c,w=0;w<s.length;w++){var S=s[w][0],_=s[w][1];switch(!v&&S!==f&&(u.start1=d,u.start2=g),S){case r:u.diffs[v++]=s[w],u.length2+=_.length,b=b.substring(0,g)+_+b.substring(g);break;case a:u.length1+=_.length,u.diffs[v++]=s[w],b=b.substring(0,g)+b.substring(g+_.length);break;case f:_.length<=2*this.Patch_Margin&&v&&s.length!=w+1?(u.diffs[v++]=s[w],u.length1+=_.length,u.length2+=_.length):_.length>=2*this.Patch_Margin&&v&&(this.patch_addContext_(u,p),o.push(u),u=new n.patch_obj,v=0,p=b,d=g);break}S!==r&&(d+=_.length),S!==a&&(g+=_.length)}return v&&(this.patch_addContext_(u,p),o.push(u)),o},n.prototype.patch_deepCopy=function(t){for(var l=[],i=0;i<t.length;i++){var c=t[i],s=new n.patch_obj;s.diffs=[];for(var o=0;o<c.diffs.length;o++)s.diffs[o]=new n.Diff(c.diffs[o][0],c.diffs[o][1]);s.start1=c.start1,s.start2=c.start2,s.length1=c.length1,s.length2=c.length2,l[i]=s}return l},n.prototype.patch_apply=function(t,l){if(t.length==0)return[l,[]];t=this.patch_deepCopy(t);var i=this.patch_addPadding(t);l=i+l+i,this.patch_splitMax(t);for(var c=0,s=[],o=0;o<t.length;o++){var u=t[o].start2+c,v=this.diff_text1(t[o].diffs),d,g=-1;if(v.length>this.Match_MaxBits?(d=this.match_main(l,v.substring(0,this.Match_MaxBits),u),d!=-1&&(g=this.match_main(l,v.substring(v.length-this.Match_MaxBits),u+v.length-this.Match_MaxBits),(g==-1||d>=g)&&(d=-1))):d=this.match_main(l,v,u),d==-1)s[o]=!1,c-=t[o].length2-t[o].length1;else{s[o]=!0,c=d-u;var p;if(g==-1?p=l.substring(d,d+v.length):p=l.substring(d,g+this.Match_MaxBits),v==p)l=l.substring(0,d)+this.diff_text2(t[o].diffs)+l.substring(d+v.length);else{var b=this.diff_main(v,p,!1);if(v.length>this.Match_MaxBits&&this.diff_levenshtein(b)/v.length>this.Patch_DeleteThreshold)s[o]=!1;else{this.diff_cleanupSemanticLossless(b);for(var w=0,S,_=0;_<t[o].diffs.length;_++){var C=t[o].diffs[_];C[0]!==f&&(S=this.diff_xIndex(b,w)),C[0]===r?l=l.substring(0,d+S)+C[1]+l.substring(d+S):C[0]===a&&(l=l.substring(0,d+S)+l.substring(d+this.diff_xIndex(b,w+C[1].length))),C[0]!==a&&(w+=C[1].length)}}}}}return l=l.substring(i.length,l.length-i.length),[l,s]},n.prototype.patch_addPadding=function(t){for(var l=this.Patch_Margin,i="",c=1;c<=l;c++)i+=String.fromCharCode(c);for(var c=0;c<t.length;c++)t[c].start1+=l,t[c].start2+=l;var s=t[0],o=s.diffs;if(o.length==0||o[0][0]!=f)o.unshift(new n.Diff(f,i)),s.start1-=l,s.start2-=l,s.length1+=l,s.length2+=l;else if(l>o[0][1].length){var u=l-o[0][1].length;o[0][1]=i.substring(o[0][1].length)+o[0][1],s.start1-=u,s.start2-=u,s.length1+=u,s.length2+=u}if(s=t[t.length-1],o=s.diffs,o.length==0||o[o.length-1][0]!=f)o.push(new n.Diff(f,i)),s.length1+=l,s.length2+=l;else if(l>o[o.length-1][1].length){var u=l-o[o.length-1][1].length;o[o.length-1][1]+=i.substring(0,u),s.length1+=u,s.length2+=u}return i},n.prototype.patch_splitMax=function(t){for(var l=this.Match_MaxBits,i=0;i<t.length;i++)if(!(t[i].length1<=l)){var c=t[i];t.splice(i--,1);for(var s=c.start1,o=c.start2,u="";c.diffs.length!==0;){var v=new n.patch_obj,d=!0;for(v.start1=s-u.length,v.start2=o-u.length,u!==""&&(v.length1=v.length2=u.length,v.diffs.push(new n.Diff(f,u)));c.diffs.length!==0&&v.length1<l-this.Patch_Margin;){var g=c.diffs[0][0],p=c.diffs[0][1];g===r?(v.length2+=p.length,o+=p.length,v.diffs.push(c.diffs.shift()),d=!1):g===a&&v.diffs.length==1&&v.diffs[0][0]==f&&p.length>2*l?(v.length1+=p.length,s+=p.length,d=!1,v.diffs.push(new n.Diff(g,p)),c.diffs.shift()):(p=p.substring(0,l-v.length1-this.Patch_Margin),v.length1+=p.length,s+=p.length,g===f?(v.length2+=p.length,o+=p.length):d=!1,v.diffs.push(new n.Diff(g,p)),p==c.diffs[0][1]?c.diffs.shift():c.diffs[0][1]=c.diffs[0][1].substring(p.length))}u=this.diff_text2(v.diffs),u=u.substring(u.length-this.Patch_Margin);var b=this.diff_text1(c.diffs).substring(0,this.Patch_Margin);b!==""&&(v.length1+=b.length,v.length2+=b.length,v.diffs.length!==0&&v.diffs[v.diffs.length-1][0]===f?v.diffs[v.diffs.length-1][1]+=b:v.diffs.push(new n.Diff(f,b))),d||t.splice(++i,0,v)}}},n.prototype.patch_toText=function(t){for(var l=[],i=0;i<t.length;i++)l[i]=t[i];return l.join("")},n.prototype.patch_fromText=function(t){var l=[];if(!t)return l;for(var i=t.split(`
`),c=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<i.length;){var o=i[c].match(s);if(!o)throw new Error("Invalid patch string: "+i[c]);var u=new n.patch_obj;for(l.push(u),u.start1=parseInt(o[1],10),o[2]===""?(u.start1--,u.length1=1):o[2]=="0"?u.length1=0:(u.start1--,u.length1=parseInt(o[2],10)),u.start2=parseInt(o[3],10),o[4]===""?(u.start2--,u.length2=1):o[4]=="0"?u.length2=0:(u.start2--,u.length2=parseInt(o[4],10)),c++;c<i.length;){var v=i[c].charAt(0);try{var d=decodeURI(i[c].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+d)}if(v=="-")u.diffs.push(new n.Diff(a,d));else if(v=="+")u.diffs.push(new n.Diff(r,d));else if(v==" ")u.diffs.push(new n.Diff(f,d));else{if(v=="@")break;if(v!=="")throw new Error('Invalid patch mode "'+v+'" in: '+d)}c++}}return l},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var t,l;this.length1===0?t=this.start1+",0":this.length1==1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?l=this.start2+",0":this.length2==1?l=this.start2+1:l=this.start2+1+","+this.length2;for(var i=["@@ -"+t+" +"+l+` @@
`],c,s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case r:c="+";break;case a:c="-";break;case f:c=" ";break}i[s+1]=c+encodeURI(this.diffs[s][1])+`
`}return i.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=a,e.exports.DIFF_INSERT=r,e.exports.DIFF_EQUAL=f}(Ft)),Ft.exports}var Xo=Ko();const Go=to(Xo),Yo={class:"column q-gutter-xs"},Zo={class:"col-shrink text-caption text-grey-7",style:{width:"40px"}},Jo={class:"col-5"},ei=["innerHTML"],ti={class:"col-auto flex flex-center",style:{width:"60px"}},ni={class:"col-5"},li=["innerHTML"],oi=Xe({__name:"ConflictResolutionDialog",setup(e){const n=new Go;function a(p){return p.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>/gi,`
`).replace(/<[^>]+>/g,"").split(`
`)}const r=pl(),f=D({get:()=>!!r.conflict,set:p=>{!p&&r.conflict&&r.acceptRemote()}}),t=D(()=>a(r.conflict?.local||"")),l=D(()=>a(r.conflict?.remote||"")),i=D(()=>{const p=Math.max(t.value.length,l.value.length),b=[];let w=0;for(let S=0;S<p;S++){const _=t.value[S]??"",C=l.value[S]??"",B=n.diff_main(C,_);n.diff_cleanupSemantic(B);let P="",T="";for(const[H,F]of B){const I=F.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");H===-1?P+=`<span class="bg-red-3">${I}</span>`:H===1?T+=`<span class="bg-green-3">${I}</span>`:(P+=I,T+=I)}const E=C!==_;b.push({local:_,remote:C,diff:E,diffIndex:E?w++:null,localHtml:T,remoteHtml:P})}return b}),c=D(()=>i.value.filter(p=>p.diff).length),s=R([]);X(c,p=>{s.value=Array(p).fill("local")},{immediate:!0});const o=D(()=>i.value.length>0),u=D(()=>c.value>0);function v(){r.keepLocal().catch(p=>{console.error(p)})}function d(){r.acceptRemote()}function g(){const p=[];for(const w of i.value)w.diff?w.diffIndex!==null&&p.push(s.value[w.diffIndex]==="remote"?w.remote:w.local):p.push(w.local);const b=p.join(`
`);r.applyMerge(b).catch(w=>{console.error(w)})}return(p,b)=>(oe(),he(Ze,{modelValue:f.value,"onUpdate:modelValue":b[0]||(b[0]=w=>f.value=w),persistent:"",maximized:"","data-cy":"conflict-dialog"},{default:Y(()=>[x(dt,{class:"fit column"},{default:Y(()=>[x(De,{class:"row items-center bg-warning text-dark"},{default:Y(()=>[x(Mt,{name:"warning",class:"q-mr-sm"}),b[1]||(b[1]=de("div",{class:"text-h6"},"Resolve Conflicting Changes",-1))]),_:1,__:[1]}),x(No),o.value?(oe(),he(De,{key:0,class:"scroll",style:{flex:"1"}},{default:Y(()=>[de("div",Yo,[(oe(!0),Le(Gn,null,Xn(i.value,(w,S)=>(oe(),Le("div",{key:S,class:Gl(["row items-start q-col-gutter-xs",w.diff?"bg-amber-2":""])},[de("div",Zo,it(S+1),1),de("div",Jo,[de("pre",{style:{margin:"0","white-space":"pre-wrap","font-family":"monospace"},innerHTML:w.remoteHtml,"data-cy":"remote-content"},null,8,ei)]),de("div",ti,[w.diff?(oe(),he(jo,{key:0,modelValue:s.value[w.diffIndex],"onUpdate:modelValue":_=>s.value[w.diffIndex]=_,dense:"",unelevated:"",size:"sm",color:"primary",options:[{label:"←",value:"remote",tooltip:"Use remote"},{label:"→",value:"local",tooltip:"Use local"}]},null,8,["modelValue","onUpdate:modelValue"])):Pe("",!0)]),de("div",ni,[de("pre",{style:{margin:"0","white-space":"pre-wrap","font-family":"monospace"},innerHTML:w.localHtml,"data-cy":"local-content"},null,8,li)])],2))),128))])]),_:1})):Pe("",!0),x(ct,{align:"right"},{default:Y(()=>[x(ne,{flat:"",label:"Use Remote",color:"primary",onClick:d,"data-cy":"btn-use-remote"}),x(ne,{flat:"",label:"Keep Local",color:"primary",onClick:v,"data-cy":"btn-keep-local"}),x(ne,{flat:"",label:"Merge Selection",color:"positive",disable:!u.value,onClick:g,"data-cy":"btn-merge"},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ii=Xe({__name:"NewDocumentDialog",emits:["create"],setup(e,{emit:n}){const a=n,r=st(),f=R("");X(()=>r.newDocumentDialog,l=>{l&&(f.value="")});function t(){a("create",f.value||"Untitled"),r.closeNewDocumentDialog()}return(l,i)=>(oe(),he(Ze,{modelValue:ee(r).newDocumentDialog,"onUpdate:modelValue":i[2]||(i[2]=c=>ee(r).newDocumentDialog=c)},{default:Y(()=>[x(dt,null,{default:Y(()=>[x(De,null,{default:Y(()=>i[3]||(i[3]=[de("div",{class:"text-h6"},"Create Document",-1)])),_:1,__:[3]}),x(De,null,{default:Y(()=>[x(tn,{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=c=>f.value=c),label:"Title","data-cy":"input-new-title"},null,8,["modelValue"])]),_:1}),x(ct,{align:"right"},{default:Y(()=>[x(ne,{flat:"",label:"Cancel",onClick:i[1]||(i[1]=c=>ee(r).closeNewDocumentDialog())}),x(ne,{flat:"",label:"Create",color:"primary",onClick:t,"data-cy":"btn-create-doc"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ai=Xe({__name:"RenameDocumentDialog",emits:["save"],setup(e,{emit:n}){const a=n,r=st(),f=R("");X(()=>r.renameDocument,l=>{l&&(f.value=l.title)},{immediate:!0});function t(){r.renameDocument&&(a("save",r.renameDocument.id,f.value),r.closeRenameDocumentDialog())}return(l,i)=>(oe(),he(Ze,{modelValue:ee(r).renameDocumentDialog,"onUpdate:modelValue":i[2]||(i[2]=c=>ee(r).renameDocumentDialog=c)},{default:Y(()=>[x(dt,null,{default:Y(()=>[x(De,null,{default:Y(()=>i[3]||(i[3]=[de("div",{class:"text-h6"},"Rename Document",-1)])),_:1,__:[3]}),x(De,null,{default:Y(()=>[x(tn,{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=c=>f.value=c),label:"Title"},null,8,["modelValue"])]),_:1}),x(ct,{align:"right"},{default:Y(()=>[x(ne,{flat:"",label:"Cancel",onClick:i[1]||(i[1]=c=>ee(r).closeRenameDocumentDialog())}),x(ne,{flat:"",label:"Save",color:"primary",onClick:t})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ri=ae({name:"QField",inheritAttrs:!1,props:{...nn,tag:{type:String,default:"label"}},emits:Zn,setup(){return Jn(el({tagProp:!0}))}}),ui=ae({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:n}){const a=D(()=>parseInt(e.lines,10)),r=D(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(a.value===1?" ellipsis":"")),f=D(()=>e.lines!==void 0&&a.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":a.value}:null);return()=>M("div",{style:f.value,class:r.value},we(n.default))}});let Tt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,Tt=e.scrollLeft>=0,e.remove()}const Se=1e3,si=["start","center","end","start-force","center-force","end-force"],bl=Array.prototype.filter,ci=window.getComputedStyle(document.body).overflowAnchor===void 0?xn:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];bl.call(a,f=>f.dataset&&f.dataset.qVsAnchor!==void 0).forEach(f=>{delete f.dataset.qVsAnchor});const r=a[n];r?.dataset&&(r.dataset.qVsAnchor="")}))};function Qe(e,n){return e+n}function It(e,n,a,r,f,t,l,i){const c=e===window?document.scrollingElement||document.documentElement:e,s=f===!0?"offsetWidth":"offsetHeight",o={scrollStart:0,scrollViewSize:-l-i,scrollMaxSize:0,offsetStart:-l,offsetEnd:-i};if(f===!0?(e===window?(o.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o.scrollViewSize+=document.documentElement.clientWidth):(o.scrollStart=c.scrollLeft,o.scrollViewSize+=c.clientWidth),o.scrollMaxSize=c.scrollWidth,t===!0&&(o.scrollStart=(Tt===!0?o.scrollMaxSize-o.scrollViewSize:0)-o.scrollStart)):(e===window?(o.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,o.scrollViewSize+=document.documentElement.clientHeight):(o.scrollStart=c.scrollTop,o.scrollViewSize+=c.clientHeight),o.scrollMaxSize=c.scrollHeight),a!==null)for(let u=a.previousElementSibling;u!==null;u=u.previousElementSibling)u.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetStart+=u[s]);if(r!==null)for(let u=r.nextElementSibling;u!==null;u=u.nextElementSibling)u.classList.contains("q-virtual-scroll--skip")===!1&&(o.offsetEnd+=u[s]);if(n!==e){const u=c.getBoundingClientRect(),v=n.getBoundingClientRect();f===!0?(o.offsetStart+=v.left-u.left,o.offsetEnd-=v.width):(o.offsetStart+=v.top-u.top,o.offsetEnd-=v.height),e!==window&&(o.offsetStart+=o.scrollStart),o.offsetEnd+=o.scrollMaxSize-o.offsetStart}return o}function On(e,n,a,r){n==="end"&&(n=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(r===!0&&(n=(Tt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):a===!0?(r===!0&&(n=(Tt===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function ot(e,n,a,r){if(a>=r)return 0;const f=n.length,t=Math.floor(a/Se),l=Math.floor((r-1)/Se)+1;let i=e.slice(t,l).reduce(Qe,0);return a%Se!==0&&(i-=n.slice(t*Se,a).reduce(Qe,0)),r%Se!==0&&r!==f&&(i-=n.slice(r,l*Se).reduce(Qe,0)),i}const di={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Rn={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...di};function fi({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:a,virtualScrollItemSizeComputed:r}){const f=fe(),{props:t,emit:l,proxy:i}=f,{$q:c}=i;let s,o,u,v=[],d;const g=R(0),p=R(0),b=R({}),w=R(null),S=R(null),_=R(null),C=R({from:0,to:0}),B=D(()=>t.tableColspan!==void 0?t.tableColspan:100);r===void 0&&(r=D(()=>t.virtualScrollItemSize));const P=D(()=>r.value+";"+t.virtualScrollHorizontal),T=D(()=>P.value+";"+t.virtualScrollSliceRatioBefore+";"+t.virtualScrollSliceRatioAfter);X(T,()=>{N()}),X(P,E);function E(){Q(o,!0)}function H(k){Q(k===void 0?o:k)}function F(k,A){const z=n();if(z==null||z.nodeType===8)return;const j=It(z,a(),w.value,S.value,t.virtualScrollHorizontal,c.lang.rtl,t.virtualScrollStickySizeStart,t.virtualScrollStickySizeEnd);u!==j.scrollViewSize&&N(j.scrollViewSize),$(z,j,Math.min(e.value-1,Math.max(0,parseInt(k,10)||0)),0,si.indexOf(A)!==-1?A:o!==-1&&k>o?"end":"start")}function I(){const k=n();if(k==null||k.nodeType===8)return;const A=It(k,a(),w.value,S.value,t.virtualScrollHorizontal,c.lang.rtl,t.virtualScrollStickySizeStart,t.virtualScrollStickySizeEnd),z=e.value-1,j=A.scrollMaxSize-A.offsetStart-A.offsetEnd-p.value;if(s===A.scrollStart)return;if(A.scrollMaxSize<=0){$(k,A,0,0);return}u!==A.scrollViewSize&&N(A.scrollViewSize),K(C.value.from);const W=Math.floor(A.scrollMaxSize-Math.max(A.scrollViewSize,A.offsetEnd)-Math.min(d[z],A.scrollViewSize/2));if(W>0&&Math.ceil(A.scrollStart)>=W){$(k,A,z,A.scrollMaxSize-A.offsetEnd-v.reduce(Qe,0));return}let m=0,y=A.scrollStart-A.offsetStart,O=y;if(y<=j&&y+A.scrollViewSize>=g.value)y-=g.value,m=C.value.from,O=y;else for(let q=0;y>=v[q]&&m<z;q++)y-=v[q],m+=Se;for(;y>0&&m<z;)y-=d[m],y>-A.scrollViewSize?(m++,O=y):O=d[m]+y;$(k,A,m,O)}function $(k,A,z,j,W){const m=typeof W=="string"&&W.indexOf("-force")!==-1,y=m===!0?W.replace("-force",""):W,O=y!==void 0?y:"start";let q=Math.max(0,z-b.value[O]),G=q+b.value.total;G>e.value&&(G=e.value,q=Math.max(0,G-b.value.total)),s=A.scrollStart;const ye=q!==C.value.from||G!==C.value.to;if(ye===!1&&y===void 0){se(z);return}const{activeElement:Re}=document,qe=_.value;ye===!0&&qe!==null&&qe!==Re&&qe.contains(Re)===!0&&(qe.addEventListener("focusout",te),setTimeout(()=>{qe?.removeEventListener("focusout",te)})),ci(qe,z-q);const ft=y!==void 0?d.slice(q,z).reduce(Qe,0):0;if(ye===!0){const Be=G>=C.value.from&&q<=C.value.to?C.value.to:G;C.value={from:q,to:Be},g.value=ot(v,d,0,q),p.value=ot(v,d,G,e.value),requestAnimationFrame(()=>{C.value.to!==G&&s===A.scrollStart&&(C.value={from:C.value.from,to:G},p.value=ot(v,d,G,e.value))})}requestAnimationFrame(()=>{if(s!==A.scrollStart)return;ye===!0&&K(q);const Be=d.slice(q,z).reduce(Qe,0),Me=Be+A.offsetStart+g.value,vt=Me+d[z];let Je=Me+j;if(y!==void 0){const Et=Be-ft,et=A.scrollStart+Et;Je=m!==!0&&et<Me&&vt<et+A.scrollViewSize?et:y==="end"?vt-A.scrollViewSize:Me-(y==="start"?0:Math.round((A.scrollViewSize-d[z])/2))}s=Je,On(k,Je,t.virtualScrollHorizontal,c.lang.rtl),se(z)})}function K(k){const A=_.value;if(A){const z=bl.call(A.children,q=>q.classList&&q.classList.contains("q-virtual-scroll--skip")===!1),j=z.length,W=t.virtualScrollHorizontal===!0?q=>q.getBoundingClientRect().width:q=>q.offsetHeight;let m=k,y,O;for(let q=0;q<j;){for(y=W(z[q]),q++;q<j&&z[q].classList.contains("q-virtual-scroll--with-prev")===!0;)y+=W(z[q]),q++;O=y-d[m],O!==0&&(d[m]+=O,v[Math.floor(m/Se)]+=O),m++}}}function te(){_.value?.focus()}function Q(k,A){const z=1*r.value;(A===!0||Array.isArray(d)===!1)&&(d=[]);const j=d.length;d.length=e.value;for(let m=e.value-1;m>=j;m--)d[m]=z;const W=Math.floor((e.value-1)/Se);v=[];for(let m=0;m<=W;m++){let y=0;const O=Math.min((m+1)*Se,e.value);for(let q=m*Se;q<O;q++)y+=d[q];v.push(y)}o=-1,s=void 0,g.value=ot(v,d,0,C.value.from),p.value=ot(v,d,C.value.to,e.value),k>=0?(K(C.value.from),pe(()=>{F(k)})):ie()}function N(k){if(k===void 0&&typeof window<"u"){const y=n();y!=null&&y.nodeType!==8&&(k=It(y,a(),w.value,S.value,t.virtualScrollHorizontal,c.lang.rtl,t.virtualScrollStickySizeStart,t.virtualScrollStickySizeEnd).scrollViewSize)}u=k;const A=parseFloat(t.virtualScrollSliceRatioBefore)||0,z=parseFloat(t.virtualScrollSliceRatioAfter)||0,j=1+A+z,W=k===void 0||k<=0?1:Math.ceil(k/r.value),m=Math.max(1,W,Math.ceil((t.virtualScrollSliceSize>0?t.virtualScrollSliceSize:10)/j));b.value={total:Math.ceil(m*j),start:Math.ceil(m*A),center:Math.ceil(m*(.5+A)),end:Math.ceil(m*(1+A)),view:W}}function re(k,A){const z=t.virtualScrollHorizontal===!0?"width":"height",j={["--q-virtual-scroll-item-"+z]:r.value+"px"};return[k==="tbody"?M(k,{class:"q-virtual-scroll__padding",key:"before",ref:w},[M("tr",[M("td",{style:{[z]:`${g.value}px`,...j},colspan:B.value})])]):M(k,{class:"q-virtual-scroll__padding",key:"before",ref:w,style:{[z]:`${g.value}px`,...j}}),M(k,{class:"q-virtual-scroll__content",key:"content",ref:_,tabindex:-1},A.flat()),k==="tbody"?M(k,{class:"q-virtual-scroll__padding",key:"after",ref:S},[M("tr",[M("td",{style:{[z]:`${p.value}px`,...j},colspan:B.value})])]):M(k,{class:"q-virtual-scroll__padding",key:"after",ref:S,style:{[z]:`${p.value}px`,...j}})]}function se(k){o!==k&&(t.onVirtualScroll!==void 0&&l("virtualScroll",{index:k,from:C.value.from,to:C.value.to-1,direction:k<o?"decrease":"increase",ref:i}),o=k)}N();const ie=Yl(I,c.platform.is.ios===!0?120:35);Kn(()=>{N()});let ce=!1;return Gt(()=>{ce=!0}),Zl(()=>{if(ce!==!0)return;const k=n();s!==void 0&&k!==void 0&&k!==null&&k.nodeType!==8?On(k,s,t.virtualScrollHorizontal,c.lang.rtl):F(o)}),be(()=>{ie.cancel()}),Object.assign(i,{scrollTo:F,reset:E,refresh:H}),{virtualScrollSliceRange:C,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:N,onVirtualScrollEvt:ie,localResetVirtualScroll:Q,padVirtualScroll:re,scrollTo:F,reset:E,refresh:H}}const $n=e=>["add","add-unique","toggle"].includes(e),vi=".*+?^${}()|[]\\",hi=Object.keys(nn);function Nt(e,n){if(typeof e=="function")return e;const a=e!==void 0?e:n;return r=>r!==null&&typeof r=="object"&&a in r?r[a]:r}const gi=ae({name:"QSelect",inheritAttrs:!1,props:{...Rn,...Yn,...nn,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:$n},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Rn.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Zn,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:n,emit:a}){const{proxy:r}=fe(),{$q:f}=r,t=R(!1),l=R(!1),i=R(-1),c=R(""),s=R(!1),o=R(!1);let u=null,v=null,d,g,p,b=null,w,S,_,C;const B=R(null),P=R(null),T=R(null),E=R(null),H=R(null),F=ro(e),I=uo(kn),$=D(()=>Array.isArray(e.options)?e.options.length:0),K=D(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:te,virtualScrollSliceSizeComputed:Q,localResetVirtualScroll:N,padVirtualScroll:re,onVirtualScrollEvt:se,scrollTo:ie,setVirtualScrollSize:ce}=fi({virtualScrollLength:$,getVirtualScrollTarget:_l,getVirtualScrollEl:Sn,virtualScrollItemSizeComputed:K}),k=el(),A=D(()=>{const h=e.mapOptions===!0&&e.multiple!==!0,L=e.modelValue!==void 0&&(e.modelValue!==null||h===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const V=e.mapOptions===!0&&d!==void 0?d:[],U=L.map(J=>Sl(J,V));return e.modelValue===null&&h===!0?U.filter(J=>J!==null):U}return L}),z=D(()=>{const h={};return hi.forEach(L=>{const V=e[L];V!==void 0&&(h[L]=V)}),h}),j=D(()=>e.optionsDark===null?k.isDark.value:e.optionsDark),W=D(()=>Mn(A.value)),m=D(()=>{let h="q-field__input q-placeholder col";return e.hideSelected===!0||A.value.length===0?[h,e.inputClass]:(h+=" q-field__input--padding",e.inputClass===void 0?h:[h,e.inputClass])}),y=D(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),O=D(()=>$.value===0),q=D(()=>A.value.map(h=>ge.value(h)).join(", ")),G=D(()=>e.displayValue!==void 0?e.displayValue:q.value),ye=D(()=>e.optionsHtml===!0?()=>!0:h=>h?.html===!0),Re=D(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||A.value.some(ye.value))),qe=D(()=>k.focused.value===!0?e.tabindex:-1),ft=D(()=>{const h={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":t.value===!0?"true":"false","aria-controls":`${k.targetUid.value}_lb`};return i.value>=0&&(h["aria-activedescendant"]=`${k.targetUid.value}_${i.value}`),h}),Be=D(()=>({id:`${k.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Me=D(()=>A.value.map((h,L)=>({index:L,opt:h,html:ye.value(h),selected:!0,removeAtIndex:wl,toggleOption:Ee,tabindex:qe.value}))),vt=D(()=>{if($.value===0)return[];const{from:h,to:L}=te.value;return e.options.slice(h,L).map((V,U)=>{const J=$e.value(V)===!0,Z=Pt(V)===!0,ue=h+U,le={clickable:!0,active:Z,activeClass:et.value,manualFocus:!0,focused:!1,disable:J,tabindex:-1,dense:e.optionsDense,dark:j.value,role:"option","aria-selected":Z===!0?"true":"false",id:`${k.targetUid.value}_${ue}`,onClick:()=>{Ee(V)}};return J!==!0&&(i.value===ue&&(le.focused=!0),f.platform.is.desktop===!0&&(le.onMousemove=()=>{t.value===!0&&xe(ue)})),{index:ue,opt:V,html:ye.value(V),label:ge.value(V),selected:le.active,focused:le.focused,toggleOption:Ee,setOptionIndex:xe,itemProps:le}})}),Je=D(()=>e.dropdownIcon!==void 0?e.dropdownIcon:f.iconSet.arrow.dropdown),Et=D(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),et=D(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),_e=D(()=>Nt(e.optionValue,"value")),ge=D(()=>Nt(e.optionLabel,"label")),$e=D(()=>Nt(e.optionDisable,"disable")),ht=D(()=>A.value.map(_e.value)),yl=D(()=>{const h={onInput:kn,onChange:I,onKeydown:wn,onKeyup:bn,onKeypress:yn,onFocus:mn,onClick(L){g===!0&&Te(L)}};return h.onCompositionstart=h.onCompositionupdate=h.onCompositionend=I,h});X(A,h=>{d=h,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&k.innerLoading.value!==!0&&(l.value!==!0&&t.value!==!0||W.value!==!0)&&(p!==!0&&je(),(l.value===!0||t.value===!0)&&Fe(""))},{immediate:!0}),X(()=>e.fillInput,je),X(t,Lt),X($,Vl);function hn(h){return e.emitValue===!0?_e.value(h):h}function At(h){if(h!==-1&&h<A.value.length)if(e.multiple===!0){const L=e.modelValue.slice();a("remove",{index:h,value:L.splice(h,1)[0]}),a("update:modelValue",L)}else a("update:modelValue",null)}function wl(h){At(h),k.focus()}function gn(h,L){const V=hn(h);if(e.multiple!==!0){e.fillInput===!0&&tt(ge.value(h),!0,!0),a("update:modelValue",V);return}if(A.value.length===0){a("add",{index:0,value:V}),a("update:modelValue",e.multiple===!0?[V]:V);return}if(L===!0&&Pt(h)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const U=e.modelValue.slice();a("add",{index:U.length,value:V}),U.push(V),a("update:modelValue",U)}function Ee(h,L){if(k.editable.value!==!0||h===void 0||$e.value(h)===!0)return;const V=_e.value(h);if(e.multiple!==!0){L!==!0&&(tt(e.fillInput===!0?ge.value(h):"",!0,!0),Ae()),P.value?.focus(),(A.value.length===0||nt(_e.value(A.value[0]),V)!==!0)&&a("update:modelValue",e.emitValue===!0?V:h);return}if((g!==!0||s.value===!0)&&k.focus(),mn(),A.value.length===0){const Z=e.emitValue===!0?V:h;a("add",{index:0,value:Z}),a("update:modelValue",e.multiple===!0?[Z]:Z);return}const U=e.modelValue.slice(),J=ht.value.findIndex(Z=>nt(Z,V));if(J!==-1)a("remove",{index:J,value:U.splice(J,1)[0]});else{if(e.maxValues!==void 0&&U.length>=e.maxValues)return;const Z=e.emitValue===!0?V:h;a("add",{index:U.length,value:Z}),U.push(Z)}a("update:modelValue",U)}function xe(h){if(f.platform.is.desktop!==!0)return;const L=h!==-1&&h<$.value?h:-1;i.value!==L&&(i.value=L)}function gt(h=1,L){if(t.value===!0){let V=i.value;do V=En(V+h,-1,$.value-1);while(V!==-1&&V!==i.value&&$e.value(e.options[V])===!0);i.value!==V&&(xe(V),ie(V),L!==!0&&e.useInput===!0&&e.fillInput===!0&&mt(V>=0?ge.value(e.options[V]):w,!0))}}function Sl(h,L){const V=U=>nt(_e.value(U),h);return e.options.find(V)||L.find(V)||h}function Pt(h){const L=_e.value(h);return ht.value.find(V=>nt(V,L))!==void 0}function mn(h){e.useInput===!0&&P.value!==null&&(h===void 0||P.value===h.target&&h.target.value===q.value)&&P.value.select()}function pn(h){Bt(h,27)===!0&&t.value===!0&&(Te(h),Ae(),je()),a("keyup",h)}function bn(h){const{value:L}=h.target;if(h.keyCode!==void 0){pn(h);return}if(h.target.value="",u!==null&&(clearTimeout(u),u=null),v!==null&&(clearTimeout(v),v=null),je(),typeof L=="string"&&L.length!==0){const V=L.toLocaleLowerCase(),U=Z=>{const ue=e.options.find(le=>String(Z.value(le)).toLocaleLowerCase()===V);return ue===void 0?!1:(A.value.indexOf(ue)===-1?Ee(ue):Ae(),!0)},J=Z=>{U(_e)!==!0&&Z!==!0&&U(ge)!==!0&&Fe(L,!0,()=>J(!0))};J()}else k.clearValue(h)}function yn(h){a("keypress",h)}function wn(h){if(a("keydown",h),Zt(h)===!0)return;const L=c.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),V=h.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(i.value!==-1||L===!0);if(h.keyCode===27){Ve(h);return}if(h.keyCode===9&&V===!1){Ie();return}if(h.target===void 0||h.target.id!==k.targetUid.value||k.editable.value!==!0)return;if(h.keyCode===40&&k.innerLoading.value!==!0&&t.value===!1){Ce(h),Ne();return}if(h.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&c.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?At(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(h.keyCode===35||h.keyCode===36)&&(typeof c.value!="string"||c.value.length===0)&&(Ce(h),i.value=-1,gt(h.keyCode===36?1:-1,e.multiple)),(h.keyCode===33||h.keyCode===34)&&Q.value!==void 0&&(Ce(h),i.value=Math.max(-1,Math.min($.value,i.value+(h.keyCode===33?-1:1)*Q.value.view)),gt(h.keyCode===33?1:-1,e.multiple)),(h.keyCode===38||h.keyCode===40)&&(Ce(h),gt(h.keyCode===38?-1:1,e.multiple));const U=$.value;if((_===void 0||C<Date.now())&&(_=""),U>0&&e.useInput!==!0&&h.key!==void 0&&h.key.length===1&&h.altKey===!1&&h.ctrlKey===!1&&h.metaKey===!1&&(h.keyCode!==32||_.length!==0)){t.value!==!0&&Ne(h);const J=h.key.toLocaleLowerCase(),Z=_.length===1&&_[0]===J;C=Date.now()+1500,Z===!1&&(Ce(h),_+=J);const ue=new RegExp("^"+_.split("").map(Vt=>vi.indexOf(Vt)!==-1?"\\"+Vt:Vt).join(".*"),"i");let le=i.value;if(Z===!0||le<0||ue.test(ge.value(e.options[le]))!==!0)do le=En(le+1,-1,U-1);while(le!==i.value&&($e.value(e.options[le])===!0||ue.test(ge.value(e.options[le]))!==!0));i.value!==le&&pe(()=>{xe(le),ie(le),le>=0&&e.useInput===!0&&e.fillInput===!0&&mt(ge.value(e.options[le]),!0)});return}if(!(h.keyCode!==13&&(h.keyCode!==32||e.useInput===!0||_!=="")&&(h.keyCode!==9||V===!1))){if(h.keyCode!==9&&Ce(h),i.value!==-1&&i.value<U){Ee(e.options[i.value]);return}if(L===!0){const J=(Z,ue)=>{if(ue){if($n(ue)!==!0)return}else ue=e.newValueMode;if(tt("",e.multiple!==!0,!0),Z==null)return;(ue==="toggle"?Ee:gn)(Z,ue==="add-unique"),e.multiple!==!0&&(P.value?.focus(),Ae())};if(e.onNewValue!==void 0?a("newValue",c.value,J):J(c.value),e.multiple!==!0)return}t.value===!0?Ie():k.innerLoading.value!==!0&&Ne()}}function Sn(){return g===!0?H.value:T.value!==null&&T.value.contentEl!==null?T.value.contentEl:void 0}function _l(){return Sn()}function kl(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?Me.value.map(h=>n["selected-item"](h)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?Me.value.map((h,L)=>M(no,{key:"option-"+L,removable:k.editable.value===!0&&$e.value(h.opt)!==!0,dense:!0,textColor:e.color,tabindex:qe.value,onRemove(){h.removeAtIndex(L)}},()=>M("span",{class:"ellipsis",[h.html===!0?"innerHTML":"textContent"]:ge.value(h.opt)}))):[M("span",{class:"ellipsis",[Re.value===!0?"innerHTML":"textContent"]:G.value})]}function _n(){if(O.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:c.value}):void 0;const h=n.option!==void 0?n.option:V=>M(ln,{key:V.index,...V.itemProps},()=>M(ut,()=>M(ui,()=>M("span",{[V.html===!0?"innerHTML":"textContent"]:V.label}))));let L=re("div",vt.value.map(h));return n["before-options"]!==void 0&&(L=n["before-options"]().concat(L)),Xt(n["after-options"],L)}function Cl(h,L){const V=L===!0?{...ft.value,...k.splitAttrs.attributes.value}:void 0,U={ref:L===!0?P:void 0,key:"i_t",class:m.value,style:e.inputStyle,value:c.value!==void 0?c.value:"",type:"search",...V,id:L===!0?k.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":h===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...yl.value};return h!==!0&&g===!0&&(Array.isArray(U.class)===!0?U.class=[...U.class,"no-pointer-events"]:U.class+=" no-pointer-events"),M("input",U)}function kn(h){u!==null&&(clearTimeout(u),u=null),v!==null&&(clearTimeout(v),v=null),!(h&&h.target&&h.target.qComposing===!0)&&(mt(h.target.value||""),p=!0,w=c.value,k.focused.value!==!0&&(g!==!0||s.value===!0)&&k.focus(),e.onFilter!==void 0&&(u=setTimeout(()=>{u=null,Fe(c.value)},e.inputDebounce)))}function mt(h,L){c.value!==h&&(c.value=h,L===!0||e.inputDebounce===0||e.inputDebounce==="0"?a("inputValue",h):v=setTimeout(()=>{v=null,a("inputValue",h)},e.inputDebounce))}function tt(h,L,V){p=V!==!0,e.useInput===!0&&(mt(h,!0),(L===!0||V!==!0)&&(w=h),L!==!0&&Fe(h))}function Fe(h,L,V){if(e.onFilter===void 0||L!==!0&&k.focused.value!==!0)return;k.innerLoading.value===!0?a("filterAbort"):(k.innerLoading.value=!0,o.value=!0),h!==""&&e.multiple!==!0&&A.value.length!==0&&p!==!0&&h===ge.value(A.value[0])&&(h="");const U=setTimeout(()=>{t.value===!0&&(t.value=!1)},10);b!==null&&clearTimeout(b),b=U,a("filter",h,(J,Z)=>{(L===!0||k.focused.value===!0)&&b===U&&(clearTimeout(b),typeof J=="function"&&J(),o.value=!1,pe(()=>{k.innerLoading.value=!1,k.editable.value===!0&&(L===!0?t.value===!0&&Ae():t.value===!0?Lt(!0):t.value=!0),typeof Z=="function"&&pe(()=>{Z(r)}),typeof V=="function"&&pe(()=>{V(r)})}))},()=>{k.focused.value===!0&&b===U&&(clearTimeout(b),k.innerLoading.value=!1,o.value=!1),t.value===!0&&(t.value=!1)})}function Dl(){return M(vl,{ref:T,class:y.value,style:e.popupContentStyle,modelValue:t.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&O.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:j.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Et.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Be.value,onScrollPassive:se,onBeforeShow:Dn,onBeforeHide:ql,onShow:Tl},_n)}function ql(h){qn(h),Ie()}function Tl(){ce()}function Bl(h){Te(h),P.value?.focus(),s.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Ml(h){Te(h),pe(()=>{s.value=!1})}function El(){const h=[M(ri,{class:`col-auto ${k.fieldClass.value}`,...z.value,for:k.targetUid.value,dark:j.value,square:!0,loading:o.value,itemAligned:!1,filled:!0,stackLabel:c.value.length!==0,...k.splitAttrs.listeners.value,onFocus:Bl,onBlur:Ml},{...n,rawControl:()=>k.getControl(!0),before:void 0,after:void 0})];return t.value===!0&&h.push(M("div",{ref:H,class:y.value+" scroll",style:e.popupContentStyle,...Be.value,onClick:Ve,onScrollPassive:se},_n())),M(Ze,{ref:E,modelValue:l.value,position:e.useInput===!0?"top":void 0,transitionShow:S,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Dn,onBeforeHide:Al,onHide:Pl,onShow:Ll},()=>M("div",{class:"q-select__dialog"+(j.value===!0?" q-select__dialog--dark q-dark":"")+(s.value===!0?" q-select__dialog--focused":"")},h))}function Al(h){qn(h),E.value!==null&&E.value.__updateRefocusTarget(k.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),k.focused.value=!1}function Pl(h){Ae(),k.focused.value===!1&&a("blur",h),je()}function Ll(){const h=document.activeElement;(h===null||h.id!==k.targetUid.value)&&P.value!==null&&P.value!==h&&P.value.focus(),ce()}function Ie(){l.value!==!0&&(i.value=-1,t.value===!0&&(t.value=!1),k.focused.value===!1&&(b!==null&&(clearTimeout(b),b=null),k.innerLoading.value===!0&&(a("filterAbort"),k.innerLoading.value=!1,o.value=!1)))}function Ne(h){k.editable.value===!0&&(g===!0?(k.onControlFocusin(h),l.value=!0,pe(()=>{k.focus()})):k.focus(),e.onFilter!==void 0?Fe(c.value):(O.value!==!0||n["no-option"]!==void 0)&&(t.value=!0))}function Ae(){l.value=!1,Ie()}function je(){e.useInput===!0&&tt(e.multiple!==!0&&e.fillInput===!0&&A.value.length!==0&&ge.value(A.value[0])||"",!0,!0)}function Lt(h){let L=-1;if(h===!0){if(A.value.length!==0){const V=_e.value(A.value[0]);L=e.options.findIndex(U=>nt(_e.value(U),V))}N(L)}xe(L)}function Vl(h,L){t.value===!0&&k.innerLoading.value===!1&&(N(-1,!0),pe(()=>{t.value===!0&&k.innerLoading.value===!1&&(h>L?N():Lt(!0))}))}function Cn(){l.value===!1&&T.value!==null&&T.value.updatePosition()}function Dn(h){h!==void 0&&Te(h),a("popupShow",h),k.hasPopupOpen=!0,k.onControlFocusin(h)}function qn(h){h!==void 0&&Te(h),a("popupHide",h),k.hasPopupOpen=!1,k.onControlFocusout(h)}function Tn(){g=f.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||O.value===!1:!0),S=f.platform.is.ios===!0&&g===!0&&e.useInput===!0?"fade":e.transitionShow}return Jl(Tn),eo(Cn),Tn(),be(()=>{u!==null&&clearTimeout(u),v!==null&&clearTimeout(v)}),Object.assign(r,{showPopup:Ne,hidePopup:Ae,removeAtIndex:At,add:gn,toggleOption:Ee,getOptionIndex:()=>i.value,setOptionIndex:xe,moveOptionSelection:gt,filter:Fe,updateMenuPosition:Cn,updateInputValue:tt,isOptionSelected:Pt,getEmittingOptionValue:hn,isOptionDisabled:(...h)=>$e.value.apply(null,h)===!0,getOptionValue:(...h)=>_e.value.apply(null,h),getOptionLabel:(...h)=>ge.value.apply(null,h)}),Object.assign(k,{innerValue:A,fieldClass:D(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:B,targetRef:P,hasValue:W,showPopup:Ne,floatingLabel:D(()=>e.hideSelected!==!0&&W.value===!0||typeof c.value=="number"||c.value.length!==0||Mn(e.displayValue)),getControlChild:()=>{if(k.editable.value!==!1&&(l.value===!0||O.value!==!0||n["no-option"]!==void 0))return g===!0?El():Dl();k.hasPopupOpen===!0&&(k.hasPopupOpen=!1)},controlEvents:{onFocusin(h){k.onControlFocusin(h)},onFocusout(h){k.onControlFocusout(h,()=>{je(),Ie()})},onClick(h){if(Ve(h),g!==!0&&t.value===!0){Ie(),P.value?.focus();return}Ne(h)}},getControl:h=>{const L=kl(),V=h===!0||l.value!==!0||g!==!0;if(e.useInput===!0)L.push(Cl(h,V));else if(k.editable.value===!0){const J=V===!0?ft.value:void 0;L.push(M("input",{ref:V===!0?P:void 0,key:"d_t",class:"q-select__focus-target",id:V===!0?k.targetUid.value:void 0,value:G.value,readonly:!0,"data-autofocus":h===!0||e.autofocus===!0||void 0,...J,onKeydown:wn,onKeyup:pn,onKeypress:yn})),V===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&L.push(M("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:bn}))}if(F.value!==void 0&&e.disable!==!0&&ht.value.length!==0){const J=ht.value.map(Z=>M("option",{value:Z,selected:!0}));L.push(M("select",{class:"hidden",name:F.value,multiple:e.multiple},J))}const U=e.useInput===!0||V!==!0?void 0:k.splitAttrs.attributes.value;return M("div",{class:"q-field__native row items-center",...U,...k.splitAttrs.listeners.value},L)},getInnerAppend:()=>e.loading!==!0&&o.value!==!0&&e.hideDropdownIcon!==!0?[M(Mt,{class:"q-select__dropdown-icon"+(t.value===!0?" rotate-180":""),name:Je.value})]:null}),Jn(k)}}),mi=Xe({__name:"ShareDocumentDialog",emits:["share"],setup(e,{emit:n}){const a=n,r=st(),f=R(""),t=R("editor"),l=[{label:"Can Edit",value:"editor"},{label:"View Only",value:"viewer"}];X(()=>r.shareDocumentDialog,c=>{c&&(f.value="",t.value="editor")});function i(){r.shareDocument&&f.value&&(a("share",r.shareDocument.id,f.value,t.value),r.closeShareDocumentDialog())}return(c,s)=>(oe(),he(Ze,{modelValue:ee(r).shareDocumentDialog,"onUpdate:modelValue":s[3]||(s[3]=o=>ee(r).shareDocumentDialog=o)},{default:Y(()=>[x(dt,null,{default:Y(()=>[x(De,null,{default:Y(()=>s[4]||(s[4]=[de("div",{class:"text-h6"},"Share Document",-1)])),_:1,__:[4]}),x(De,{class:"column"},{default:Y(()=>[x(tn,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=o=>f.value=o),label:"User alias",class:"q-mb-md","data-cy":"input-share-alias"},null,8,["modelValue"]),x(gi,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=o=>t.value=o),options:l,label:"Permission","data-cy":"select-share-role"},null,8,["modelValue"])]),_:1}),x(ct,{align:"right"},{default:Y(()=>[x(ne,{flat:"",label:"Cancel",onClick:s[2]||(s[2]=o=>ee(r).closeShareDocumentDialog())}),x(ne,{flat:"",label:"Share",color:"primary",onClick:i,"data-cy":"btn-share-doc"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),pi=Xe({__name:"DeleteDocumentDialog",emits:["delete"],setup(e,{emit:n}){const a=n,r=st();function f(){r.deleteDocument&&(a("delete",r.deleteDocument.id),r.closeDeleteDocumentDialog())}return(t,l)=>(oe(),he(Ze,{modelValue:ee(r).deleteDocumentDialog,"onUpdate:modelValue":l[1]||(l[1]=i=>ee(r).deleteDocumentDialog=i)},{default:Y(()=>[x(dt,null,{default:Y(()=>[x(De,{class:"text-h6"},{default:Y(()=>l[2]||(l[2]=[at("Delete Document")])),_:1,__:[2]}),x(De,null,{default:Y(()=>[at(' Are you sure you want to delete "'+it(ee(r).deleteDocument?.title)+'"? This action cannot be undone. ',1)]),_:1}),x(ct,{align:"right"},{default:Y(()=>[x(ne,{flat:"",label:"Cancel",onClick:l[0]||(l[0]=i=>ee(r).closeDeleteDocumentDialog())}),x(ne,{flat:"",label:"Delete",color:"negative",onClick:f,"data-cy":"btn-delete-doc"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),bi={key:0},yi={class:"row q-mb-md items-center"},wi={class:"text-bold"},Si={class:"text-caption text-grey-7"},_i={"data-cy":"doc-creator"},ki={key:0},Ci={"data-cy":"doc-role"},Di={key:1},qi=["innerHTML"],Ai=Xe({__name:"HomePage",setup(e){const n=Fo(),a=pl(),r=st();function f(s){a.openDocument(s).catch(o=>{console.error(o)})}Ke(()=>{n.loadDocuments()});function t(s){n.createDocument(s).catch(o=>{console.error(o)})}function l(s,o){n.renameDocument(s,o)}function i(s,o,u){n.shareDocument(s,o,u)}function c(s){n.deleteDocument(s)}return(s,o)=>(oe(),he(so,{class:"q-pa-md"},{default:Y(()=>[ee(a).active?(oe(),Le("div",Di,[x(ne,{flat:"",icon:"arrow_back",class:"q-mb-md",onClick:ee(a).close,"data-cy":"btn-back"},null,8,["onClick"]),ee(a).canEdit?Pe("",!0):(oe(),he(ho,{key:0,color:"grey-5",class:"q-mb-sm","data-cy":"view-only-badge"},{default:Y(()=>o[4]||(o[4]=[at("View Only")])),_:1,__:[4]})),ee(a).canEdit?(oe(),he(xo,{key:2,modelValue:ee(a).content,"onUpdate:modelValue":o[1]||(o[1]=u=>ee(a).content=u),"data-cy":"editor"},null,8,["modelValue"])):(oe(),Le("div",{key:1,class:"q-editor__content q-pa-sm bg-grey-2",innerHTML:ee(a).content,style:{"min-height":"10rem",border:"1px solid #ccc","border-radius":"4px"}},null,8,qi))])):(oe(),Le("div",bi,[de("div",yi,[x(ne,{color:"primary",label:"New Document",onClick:o[0]||(o[0]=u=>ee(r).openNewDocumentDialog()),class:"q-mr-sm","data-cy":"btn-new-doc"}),x(ne,{outline:"",label:"Refresh",onClick:ee(n).loadDocuments,"data-cy":"btn-refresh"},null,8,["onClick"])]),x(fo,{bordered:"",separator:""},{default:Y(()=>[(oe(!0),Le(Gn,null,Xn(ee(n).docs,u=>(oe(),he(ln,{key:u.id,clickable:"","data-doc-id":u.id},{default:Y(()=>[x(ut,{onClick:v=>f(u.id),"data-cy":"doc-item-title"},{default:Y(()=>[de("div",wi,it(u.title),1),de("div",Si,[o[3]||(o[3]=at(" Owner: ")),de("span",_i,it(u.creator),1),u.role.toLocaleLowerCase()!=="owner"?(oe(),Le("span",ki,[o[2]||(o[2]=at(" · ")),de("span",Ci,it(u.role),1)])):Pe("",!0)])]),_:2},1032,["onClick"]),x(ut,{side:""},{default:Y(()=>[u.role!=="viewer"?(oe(),he(ne,{key:0,dense:"",flat:"",icon:"share",onClick:Ht(v=>ee(r).openShareDocumentDialog(u),["stop"]),"data-cy":"icon-share-doc"},null,8,["onClick"])):Pe("",!0),u.role!=="viewer"?(oe(),he(ne,{key:1,dense:"",flat:"",icon:"edit","data-cy":"icon-rename-doc",onClick:Ht(v=>ee(r).openRenameDocumentDialog(u),["stop"])},null,8,["onClick"])):Pe("",!0),u.role.toLocaleLowerCase()==="owner"?(oe(),he(ne,{key:2,dense:"",flat:"",color:"negative",icon:"delete","data-cy":"icon-delete-doc",onClick:Ht(v=>ee(r).openDeleteDocumentDialog(u),["stop"])},null,8,["onClick"])):Pe("",!0)]),_:2},1024)]),_:2},1032,["data-doc-id"]))),128))]),_:1})])),x(ii,{onCreate:t}),x(ai,{onSave:l}),x(mi,{onShare:i}),x(pi,{onDelete:c}),x(oi)]),_:1}))}});export{Ai as default};
